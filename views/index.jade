extends layout

block content

	span#bottom.rp-bottom
	//- md-progress-linear.md-accent.rp-progress(ng-controller="rpDeterminateProgressCtrl", ng-show="loading", md-mode="{{mode}}", value="{{value}}")
	//- md-progress-linear.md-accent.rp-progress(ng-controller="rpDeterminateProgressCtrl", ng-show="loading", md-mode="determinate", value="{{value}}")
	md-progress-linear.md-accent.rp-progress(ng-controller="rpIndeterminateProgressCtrl", ng-show="loading", md-mode="indeterminate")

	rp-toolbar

	.rp-page-content(layout="row", flex)
		//- md-sidenav.md-sidenav-left.md-whiteframe-z2.rp-sidenav(md-component-id="left", md-is-locked-open="sidenavIsOpen()", layout="column")
		md-sidenav.md-sidenav-left.rp-sidenav(md-component-id="left", md-is-locked-open="$mdMedia('gt-md')", layout="column")
			md-toolbar.rp-brand-toolbar(hide-gt-md, layout="column", layout-align="center center")
				a(href="/")
					img.rp-brand-logo(src="/images/logo.png")
				a.rp-brand-name(href="/") reddup
			//- md-button.rp-sidenav-button(ng-click="suspendWatchers()") suspend
			//- md-button.rp-sidenav-button(ng-click="restoreWatchers()") restore
			md-button.rp-sidenav-button(ng-click="loadMoreComments()") comments

			md-content.rp-sidenav-content
				.rp-sidenav-user
					//- md-button.rp-sidenav-button#calcWatchers(flex) calc watchers
					.rp-sidenav-identity(ng-controller="rpIdentityCtrl", ng-if="authenticated")
						md-progress-circular.md-accent.rp-sidenav-identity-loading(ng-if="loading", md-mode="indeterminate", md-diameter="24")
						.rp-sidenav-identity-identity(ng-if="!loading", layout-padding, layout-margin)
							a.rp-sidenav-identity-name(href="/u/{{identity.name}}") {{::identity.name}}
							p.rp-sidenav-identity-score
								span.rp-sidenav-identity-link-karma {{::identity.link_karma}}
								|  â€¢  
								span.rp-sidenav-identity-comment-karma {{::identity.comment_karma}}

					.rp-sidenav-login(layout="row")
						md-button.md-button-toggle.rp-sidenav-button(layout-fill, flex, href="/auth/reddit/logout", target="_self", ng-if="authenticated") 
							| Logout
						md-button.md-button-toggle.md-accent.rp-sidenav-button(ng-controller="rpLoginCtrl", layout-fill, flex, href="/auth/reddit/login/{{safePath}}", target="_self", ng-if="!authenticated")
							| Login With Reddit

				.rp-sidenav-settings(ng-controller="rpSettingsSidenavCtrl")
					md-button.rp-sidenav-button(flex, ng-click="showSettings($event)") Settings

				.rp-sidenav-message(ng-if="authenticated", ng-controller="rpMessageSidenavCtrl")
					md-button.rp-sidenav-button(flex) Messages
					md-button.rp-sidenav-message-button(ng-click="showInbox($event)", flex) Inbox
					md-button.rp-sidenav-message-button(flex, ng-click="showCompose($event)") Compose
					md-button.rp-sidenav-message-button(flex, ng-click="showSent($event)") Sent

				div(ng-include="'partials/rpSubreddits'", ng-controller="rpSubredditsCtrl")

		div.rp-main.rp-bottom-sheet-parent#rp-main(layout="column", flex)
			md-content.rp-view(ng-view, layout="column", flex)


		md-sidenav.md-sidenav-right.md-whiteframe-z2(md-component-id="right")
			.rp-sdebar(ng-controller="rpSidebarCtrl")
				md-toolbar.md-theme-light
					.md-toolbar-tools
						h1 {{about.display_name}}

						span(flex)

						.rp-toolbar-subscribe(ng-if="authenticated && !showSearchForm", ng-show="showSubscribe", ng-controller="rpSubscribeCtrl")
							md-progress-circular.md-accent(md-mode="indeterminate", ng-if="loadingSubscription", md-diameter="24")
							md-button.rp-sidebar-toolbar-action-button.md-icon-button#rp-posts-sub-button(ng-if="!loadingSubscription", aria-label="subscribe", ng-click="toggleSubscription()")
								.rp-toolder-subscribe-icon-switch(ng-switch="subscribed")
									md-icon.rp-toolbar-action-icon(ng-switch-when="true", md-svg-src="../../icons/ic_check_box_black_24px.svg")
										md-tooltip subscribed
									md-icon.rp-toolbar-action-icon(ng-switch-when="false", md-svg-src="../../icons/ic_check_box_outline_blank_black_24px.svg")
										md-tooltip not subscribed

				md-content(layout-padding)
					//- p {{about.description}}
					.rp-sidebar-header(layout-padding, layout="row")
						span.rp-readers(flex) {{about.subscribers | number}} readers  
						span.rp-here(flex) {{about.accounts_active | number}} here  
					.rp-sidebar-description
						p(ng-bind-html="about.description_html | rp_open_link_new_window | rp_unescape_embed")
