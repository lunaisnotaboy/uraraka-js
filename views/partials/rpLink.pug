md-card.rp-post(id="{{::post.data.name}}")
    rp-link-responsive-ad(ng-if="::post.isAd === true")

    .rp-link-not-ad(ng-if="::post.isAd === false")
        .rp-link-comment-header(ng-if="isComment", layout-padding, layout="row")
            .rp-user-comment-details(flex)
                a.rp-user-comment-link-title(ng-href="/r/{{post.data.subreddit}}/comments/{{post.data.link_id | rp_name_to_id36}}") {{post.data.link_title}}
                |  by&nbsp
                a.rp-user-comment-link-author(href="/u/{{post.data.link_author}}") {{post.data.link_author}}
                |  in&nbsp
                a.rp-user-comment-link-subreddit(href="/r/{{post.data.subreddit}}") {{post.data.subreddit}}

        md-divider

        .rp-post-header(layout-padding, layout="row", layout-align="start center")
            rp-score.rp-post-header-score(score="post.data.score", reddit-id="::post.data.name", likes="post.data.likes")

            .rp-post-header-content(flex)
                a.rp-post-header-title(ng-href="{{::post.data.url | rp_hijack_reddit_link}}", target="_blank") {{::post.data.title | rp_clean_title}}
                .rp-post-header-details
                    span(am-time-ago="::post.data.created_utc")
                    |  by&nbsp
                    a.rp-post-header-author(href="/u/{{::post.data.author}}") {{::post.data.author}}
                    span.rp-post-header-subreddit(ng-if="showSub")
                        |  to&nbsp
                        a.rp-post-header-subreddit-link(href="/r/{{::post.data.subreddit}}") r/{{::post.data.subreddit}}

            rp-gilded(parent-ctrl="thisCtrl", author="::post.data.author", gilded="::post.data.gilded")

            .rp-stickied(ng-if="::post.data.stickied")
                md-icon(md-svg-icon="ic_pin_24px")
                    md-tooltip(hide, show-gt-sm) stickied post

        .rp-link-comment(ng-if="isComment", layout-padding, compile="post.data.body_html | rp_unescape_html | rp_load_comment_media")

        .rp-link-link(ng-if="!isComment")
            .rp-post-media(ng-if="::!post.data.is_self")
                rp-media(url="::post.data.url", post="post")

            .rp-post-selftext(ng-if="::post.data.selftext_html", layout-padding)
                //- p(compile="post.data.selftext_html  | limitTo: 500 | rp_unescape_embed | rp_open_in_tab")
                p(ng-bind-html="post.data.selftext_html  | limitTo: 500 | rp_unescape_html | rp_open_in_tab")

        .rp-post-actions(layout-padding, layout="row", layout-align="space-around center")
            rp-save-button(reddit-id="::post.data.name", saved="post.data.saved")
            rp-share-button(post="post")
            rp-delete-button(parent-ctrl="thisController", ng-if="isMine === true")
            rp-article-context-button(parent-ctrl="thisController", post="post", is-comment="isComment", ng-if="isComment")
            rp-article-button(parent-ctrl="thisController", post="post", is-comment="isComment")

        rp-delete-form(reddit-id="post.data.name", parent-ctrl="thisController", type="'post'", ng-if="thisController.isDeleting")
        //- rp-reply-form(reddit-id="post.data.name", parent-ctrl="thisController", post="post", ng-if="!postComment")

        md-divider(ng-if="postComment")

        .rp-post-comment(layout-padding, ng-if="postComment")
            p {{postComment.data.body}}
