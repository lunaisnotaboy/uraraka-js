"use strict";function insertComment(e,t){for(var r=0;r<t.length;r++)e.data.parent_id===t[r].data.name?t[r].data.replies&&""!==t[r].data.replies?t[r].data.replies.data.children.push(e):t[r].data.replies={data:{children:[e]}}:e.data.name===t[r].data.parent_id?(e.data.replies={data:{children:[t[r]]}},t.splice(r,1),t.push(e)):t[r].data.replies&&""!==t[r].data.replies&&(t[r].data.replies.children=insertComment(e,t[r].data.replies.data.children));return t}var rpApp=angular.module("rpApp",["ngRoute","ngMaterial","ngAnimate","ngSanitize","linkify","angularMoment","RecursionHelper","ng-mfb","debounce","mediaCheck","angular-google-adsense","rpServices","rpUtilServices","rpImgurUtilServices","rpResourceServices","rpFilters","rpDirectives","rpMediaDirectives","rpControllers","rpPostControllers","rpUserControllers","rpMessageControllers","rpArticleControllers","rpCommentControllers","rpMediaControllers","rpProgressControllers","rpCaptchaControllers","rpSettingsControllers","rpSearchControllers","rpShareControllers","rpSubmitControllers","rpScoreControllers","rpReplyFormControllers","rpDeleteControllers","rpSaveControllers","rpGildControllers","rpEditFormControllers","rpLinkControllers","rpTabsControllers","rpRedditApiServices"]);rpApp.constant("angularMomentConfig",{preprocess:"unix",timezone:"utc"}),rpApp.config(["$routeProvider","$locationProvider",function(e,t){e.when("/submitLink",{templateUrl:"partials/rpSubmitLink"}).when("/submitText",{templateUrl:"partials/rpSubmitText"}).when("/:sub/search",{templateUrl:"partials/rpSearch",controller:"rpSearchCtrl"}).when("/search",{templateUrl:"partials/rpSearch",controller:"rpSearchCtrl"}).when("/settings",{templateUrl:"partials/rpSettings",controller:"rpSettingsCtrl"}).when("/message",{templateUrl:"partials/rpMessage",controller:"rpMessageCtrl"}).when("/message/compose",{templateUrl:"partials/rpMessageCompose",controller:"rpMessageComposeCtrl"}).when("/message/:where",{templateUrl:"partials/rpMessage",controller:"rpMessageCtrl"}).when("/u/:username",{templateUrl:"partials/rpUser",controller:"rpUserCtrl"}).when("/u/:username/:where",{templateUrl:"partials/rpUser",controller:"rpUserCtrl"}).when("/user/:username",{templateUrl:"partials/rpUser",controller:"rpUserCtrl"}).when("/user/:username/:where",{templateUrl:"partials/rpUser",controller:"rpUserCtrl"}).when("/r/:subreddit/comments/:article/:slug/:comment",{templateUrl:"partials/rpArticleCard",controller:"rpArticleCtrl"}).when("/r/:subreddit/comments/:article/:comment",{templateUrl:"partials/rpArticleCard",controller:"rpArticleCtrl"}).when("/r/:subreddit/comments/:article",{templateUrl:"partials/rpArticleCard",controller:"rpArticleCtrl"}).when("/r/:sub/:sort",{templateUrl:"partials/rpPosts",controller:"rpPostsCtrl"}).when("/error/:errorcode",{templateUrl:"partials/rpRouteError"}).when("/error",{templateUrl:"partials/rpRouteError"}).when("/facebookComplete",{templateUrl:"partials/rpFacebookComplete"}).when("/r/:sub",{templateUrl:"partials/rpPosts",controller:"rpPostsCtrl"}).when("/:sort",{templateUrl:"partials/rpPosts",controller:"rpPostsCtrl"}).when("/",{templateUrl:"partials/rpPosts",controller:"rpPostsCtrl"}).otherwise({templateUrl:"partials/rpRouteError"}),t.html5Mode(!0)}]),rpApp.config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("deep-orange").accentPalette("deep-orange",{"default":"500"}),e.theme("indigo").primaryPalette("indigo").accentPalette("indigo",{"default":"500"}),e.theme("blue").primaryPalette("blue").accentPalette("blue",{"default":"500"}),e.theme("red").primaryPalette("red").accentPalette("red",{"default":"500"}),e.theme("purple").primaryPalette("purple").accentPalette("purple",{"default":"500"}),e.theme("pink").primaryPalette("pink").accentPalette("pink",{"default":"500"}),e.theme("green").primaryPalette("green").accentPalette("green",{"default":"500"}),e.alwaysWatchTheme(!0)}]),rpApp.run(["$route","$rootScope","$location",function(e,t,r){var i=r.path;r.path=function(o,n){if(n===!1)var s=e.current,a=t.$on("$locationChangeSuccess",function(){e.current=s,a()});return i.apply(r,[o])}}]);var rpArticleControllers=angular.module("rpArticleControllers",[]);rpArticleControllers.controller("rpArticleTabsCtrl",["$scope","$timeout",function(e,t){e.tabClick=function(r){t(function(){e.parentCtrl.tabClick(r)},350)}}]),rpArticleControllers.controller("rpArticleButtonCtrl",["$scope","$rootScope","$filter","$mdDialog","$mdBottomSheet","rpSettingsUtilService","rpLocationUtilService",function(e,t,r,i,o,n,s){e.showArticle=function(t,a){var l,c,p,u;if(e.post)l=e.isComment?r("rp_name_to_id36")(e.post.data.link_id):e.post.data.id,c=e.post.data.subreddit,p=e.isComment?e.post.data.id:"",u="#"+e.post.data.name;else if(e.message){var d=/^\/r\/([\w]+)\/comments\/([\w]+)\/(?:[\w]+)\/([\w]+)/,m=d.exec(e.message.data.context);m&&(c=m[1],l=m[2],p=m[3]),u="#"+e.message.data.name}var h=function(){o.hide()};if(n.settings.commentsDialog&&!t.ctrlKey)i.show({controller:"rpArticleDialogCtrl",templateUrl:"partials/rpArticleDialog",targetEvent:t,locals:{post:e.isComment?void 0:e.post,article:l,comment:a?p:"",subreddit:c},clickOutsideToClose:!0,escapeToClose:!1,onRemoving:h});else{var g="",f="/r/"+c+"/comments/"+l;a&&(f+="/"+p+"/",g="context=8"),s(t,f,g,!0,!1)}}}]),rpArticleControllers.controller("rpArticleDialogCtrl",["$scope","$rootScope","$location","$filter","$mdDialog","$mdBottomSheet","post","article","comment","subreddit",function(e,t,r,i,o,n,s,a,l,c,p){e.dialog=!0,e.post=s,e.article=a,e.comment=l,e.subreddit=c,!angular.isUndefined(e.post);var u=e.$on("$locationChangeSuccess",function(){o.hide(),n.hide()});e.$on("destroy",function(){u()})}]),rpArticleControllers.controller("rpArticleCtrl",["$scope","$rootScope","$routeParams","$timeout","$filter","$q","rpCommentsUtilService","rpTitleChangeService","rpPostFilterButtonUtilService","rpUserFilterButtonUtilService","rpUserSortButtonUtilService","rpSubscribeButtonUtilService","rpSubredditsUtilService","rpLocationUtilService","rpSearchFormUtilService","rpSearchFilterButtonUtilService","rpToolbarShadowUtilService","rpIdentityUtilService","rpAuthUtilService","rpSidebarButtonUtilService",function(e,t,r,i,o,n,s,a,l,c,p,u,d,m,h,g,f,v,b,S){function $(t){e.postLoading=!0,s(e.subreddit,e.article,e.sort,e.cid,e.context,function(r,i){r||(e.post=i.data[0].data.children[0],e.postLoading=!1,e.editing=!1,t&&t())})}function w(){e.comments=[],e.threadLoading=!0,s(e.subreddit,e.article,e.sort,e.cid,e.context,function(r,o){t.$emit("progressComplete"),e.commentsLoading=!1,r||(e.post=e.post||o[0].data.children[0],i(angular.noop,0),e.threadLoading=!1,o[1].data.children.length>0?e.haveComments=!0:(e.haveComments=!1,e.noMorePosts=!0),e.haveComments&&(b.isAuthenticated?v.getIdentity(function(t){e.identity=t,e.isMine=e.post.data.author===e.identity.name,C(o[1].data.children,3)}):C(o[1].data.children,3)),"[deleted]"===e.post.data.author.toLowerCase()&&(e.deleted=!0))})}function C(t,r){function o(e,t){for(var r=0;r<e.length;r++){var i=e[r];i.depth=t,s(i,u),i.data.replies&&""!==i.data.replies&&i.data.replies.data.children.length>0&&o(i.data.replies.data.children,t+1),p[u]&&p[u].rendered===!1&&(p[u].rendered=!0,u++)}}function s(e,t){if(p[t]){for(var i=p[t].rootComment,o=0,n=p[t].batchSize;i.data.replies&&""!==i.data.replies&&i.data.replies.data.children.length>0&&n>o;)i=i.data.replies.data.children[0],o++;void 0!==i.data.replies&&""!==i.data.replies&&0!==i.data.replies.data.children.length||(i.data.replies={data:{children:[]}});var s=JSON.parse(JSON.stringify(e));s.data.replies="",i.data.replies.data.children.push(s),p[t].batchSize++}else{var a=JSON.parse(JSON.stringify(e));a.data.replies="",p[t]={rootComment:a,batchSize:0,rendered:!1}}p[t].batchSize===r&&(p[t].rendered=!0,u++)}function a(t){if(t)for(;h<p.length;h++)l(h);else{for(var r=0;g>r;r++)l(h+r);h+=g,h>=p.length&&(e.showLoadAll=!1,e.noMorePosts=!0)}}function l(e){return d=angular.bind(null,c,e),m=m.then(d)}function c(t){if(p[t]){var r=p[t].rootComment,o=r.depth;if(0===o)i(function(){e.comments.push(r)},0);else{var n=e.comments[e.comments.length-1],s=0;if(void 0!==n){for(;n.data.replies&&""!==n.data.replies&&n.data.replies.data.children.length>0&&o>s;)n=n.data.replies.data.children[n.data.replies.data.children.length-1],s++;void 0!==n.data.replies&&""!==n.data.replies&&0!==n.data.replies.data.children.length||(n.data.replies={data:{children:[]}}),i(function(){n.data.replies.data.children.push(r)},0)}}return i(angular.noop,0)}}var p=[],u=0;e.comments=[];var d,m=n.when(),h=0,g=3;o(t,0),a(!1),i(function(){e.showLoadAll!==!1&&(e.showLoadAll=!0)},1e3),e.morePosts=function(){a(!1)},e.loadAllComments=function(){e.showLoadAll=!1,a(!0)}}!angular.isUndefined(e.post),angular.isUndefined(e.article)&&(e.article=r.article),angular.isUndefined(e.subreddit)&&(e.subreddit=r.subreddit);var y=/^\w{7}$/;angular.isUndefined(e.comment)?r.comment&&y.test(r.comment)?e.cid=r.comment:e.cid="":e.cid=e.comment,r.context?e.context=r.context:angular.isUndefined(e.cid)?e.context=0:e.context=8,e.sort=r.sort||"confidence",e.isMine=null,e.dialog||(l.hide(),c.hide(),p.hide(),h.hide(),g.hide(),u.show(),f.hide(),S.show(),a.prepTitleChange("r/"+e.subreddit),d.setSubreddit(e.subreddit));var U=e.tabs=[{label:"best",value:"confidence"},{label:"top",value:"top"},{label:"new",value:"new"},{label:"hot",value:"hot"},{label:"controvesial",value:"controversial"},{label:"old",value:"old"},{label:"q&a",value:"qa"}];e.dialog||(t.$emit("rp_tabs_changed",U),t.$emit("rp_tabs_show"));for(var _=0;_<U.length;_++)if(e.sort===U[_].value){e.dialog?e.selectedTab=_:t.$emit("rp_tabs_selected_index_changed",_);break}e.threadLoading=!0,e.commentsLoading=!1,e.post||t.$emit("progressLoading"),w(),e.thisController=this,this.completeReplying=function(t,r){this.isReplying=!1,e.comments.unshift(t.json.data.things[0]),e.haveComments===!1&&(e.haveComments=!0)},this.completeDeleting=function(t){this.isDeleting=!1,e.deleted=!0},this.completeEditing=function(){var e=this;$(function(){e.isEditing=!1})};var k=!1;this.tabClick=function(t){k?(e.sort=t,e.commentsLoading=!0,w()):k=!0};var R=t.$on("rp_tab_click",function(t,r){e.sort=r,e.dialog||m(null,"/r/"+e.subreddit+"/comments/"+e.article,"sort="+e.sort,!1,!1),e.commentsLoading=!0,w()});e.$on("$destroy",function(){R()})}]);var rpCaptchaControllers=angular.module("rpCaptchaControllers",[]);rpCaptchaControllers.controller("rpCaptchaCtrl",["$scope","$rootScope","rpCaptchaUtilService",function(e,t,r){function i(){r.needsCaptcha(function(t,r){t||r&&(e.needsCaptcha=!0,o())})}function o(){e.iden="",e.captcha="",e.showCaptchaProgress=!0,r.newCaptcha(function(t,r){t||(e.iden=r.json.data.iden,e.captchaImage="http://www.reddit.com/captcha/"+e.iden+".png",e.showCaptchaProgress=!1)})}e.needsCaptcha=!1,e.captchaImage="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",i(),e.reloadCaptcha=function(){e.showCaptchaProgress=!0,i()};var n=t.$on("successful_captcha",function(){e.showBadCaptcha=!1,e.needsCaptcha=!1}),s=t.$on("reset_captcha",function(){i()});e.$on("$destroy",function(){n(),s()})}]);var rpCommentControllers=angular.module("rpCommentControllers",[]);rpCommentControllers.controller("rpCommentCtrl",["$scope","$rootScope","$element","$compile","$filter","$timeout","rpMoreChildrenUtilService","rpIdentityUtilService","rpAuthUtilService","rpCommentsUtilService",function(e,t,r,i,o,n,s,a,l,c){function p(t){c(e.comment.data.subreddit,o("rp_name_to_id36")(e.comment.data.link_id),"hot",e.comment.data.id,0,function(r,i){r||(e.comment=i.data[1].data.children[0],e.isEditing=!1,t&&t())})}e.thisController=this,e.isDeleted=e.comment&&void 0!==e.comment.data.author&&void 0!==e.comment.data.body&&"[deleted]"===e.comment.data.author&&"[deleted]"===e.comment.data.body,e.childDepth=e.depth+1,e.isChildrenCollapsed=!1,e.isLoadingMoreChildren=!1,e.isMine=e.identity?e.comment.data.author===e.identity.name:!1,e.isFocussed=e.cid===e.comment.data.id,e.isOp=e.post?e.comment.data.author===e.post.data.author:!1,e.isComment="t1"===e.comment.kind,e.isShowMore="more"===e.comment.kind&&e.comment.data.count>0,e.isContinueThread="more"===e.comment.kind&&0===e.comment.data.count&&e.comment.data.children.length>0,e.currentComment=e.comment,e.hasChildren=function(){return void 0!==e.comment.data.replies&&""!==e.comment.data.replies&&0!==e.comment.data.replies.data.children.length},e.thisController=this,this.completeReplying=function(t,r){this.isReplying=!1,e.comment.data.replies?(e.isChildrenCollapsed===!0&&e.expandChildren(),e.comment.data.replies.data.children.unshift(t.json.data.things[0])):(e.childDepth=e.depth+1,e.comment.data.replies={data:{children:t.json.data.things}},e.hasChildren=!0)},this.completeDeleting=function(t){this.isDeleting=!1,e.isDeleted=!0},this.completeEditing=function(){var e=this;p(function(){e.isEditing=!1})},e.collapseChildren=function(){n(function(){e.isChildrenCollapsed=!0},300)},e.expandChildren=function(){n(function(){e.isChildrenCollapsed=!1},300)},e.showMore=function(){e.isLoadingMoreChildren=!0,e.sort||(e.sort="confidence"),s(e.sort,e.post.data.name,e.comment.data.children.join(","),function(t,r){if(e.isLoadingMoreChildren=!1,t);else if(r.json.data.things.length>0){var i=new Array(0);i[0]=r.json.data.things[0];for(var o=1;o<r.json.data.things.length;o++)i=insertComment(r.json.data.things[o],i),r.json.data.things[o].data.parent_id===e.comment.data.parent_id&&i.push(r.json.data.things[o]);if(e.parent.data&&e.parent.data.replies&&""!==e.parent.data.replies&&e.parent.data.replies.data.children.length>1){for(var n=0;n<e.parent.data.replies.data.children.length&&e.parent.data.replies.data.children[n].data.name!==e.comment.data.name;n++);e.parent.data.replies.data.children.splice.apply(e.parent.data.replies.data.children,[n,1].concat(i))}else e.parent.data.replies={data:{children:i}}}else e.parent.data.replies.data.children.pop()})}}]);var rpControllers=angular.module("rpControllers",[]);rpControllers.controller("rpAppCtrl",["$scope","$rootScope","$timeout","$mdSidenav","$mdMedia","rpTitleChangeService","rpAuthUtilService","rpSettingsUtilService",function(e,t,r,i,o,n,s,a){e.isDocked=!0,t.$on("settings_changed",function(){e.theme=a.settings.theme}),e.dynamicTheme="redTheme";var l=e.$on("handleTitleChange",function(t,r){e.appTitle=n.title});e.setAuthentication=function(t){e.authenticated=t,s.setAuthenticated(t)},e.sidenavIsOpen=function(){return i("left").isOpen()},e.toggleLeft=function(){i("left").toggle()},e.close=function(){i("left").close()},e.isOpenRules=function(){return i("right").isOpen()},e.toggleRules=function(){i("right").toggle()},e.suspendWatchers=function(){t.$emit("rp_suspendable_suspend")},e.restoreWatchers=function(){t.$emit("rp_suspendable_resume")},e.simpleSuspendWatchers=function(){t.$emit("rp_simple_suspendable_suspend")},e.simpleRestoreWatchers=function(){t.$emit("rp_simple_suspendable_restore")};var c=e.$on("$locationChangeSuccess",function(){i("left").isOpen()&&i("left").toggle(),i("right").isOpen()&&i("right").toggle()});e.$on("$destroy",function(){l(),c()})}]),rpControllers.controller("rpIdentitySidenavCtrl",["$scope","rpIdentityUtilService","rpAuthUtilService",function(e,t,r){e.loading=!0,t.getIdentity(function(t){e.identity=t,e.loading=!1})}]),rpControllers.controller("rpLoginSidenavCtrl",["$scope","$location",function(e,t){e.safePath=encodeURIComponent(t.path());var r=e.$on("$locationChangeSuccess",function(){e.safePath=encodeURIComponent(t.path())});e.$on("$destroy",function(){r()})}]),rpControllers.controller("rpSubredditsSidenavCtrl",["$scope","$rootScope","$timeout","$q","$mdSidenav","rpSubredditsUtilService","rpLocationUtilService","$compile",function(e,t,r,i,o,n,s,a){e.subs=[],e.isOpen=!1,e.toggleOpen=function(){r(function(){e.isOpen=!e.isOpen},250)},e.pinnedSubs=[{name:"frontpage",url:"/"},{name:"all",url:"/r/all/"},{name:"random",url:"/r/random/"},{name:"reddupco",url:"/r/reddupco"}];var l=t.$on("subreddits_updated",function(){e.subs=n.subs});e.openSubreddit=function(e,t){r(function(){s(e,t,"",!0,!1)},350)},e.$on("$destroy",function(){l()})}]),rpControllers.controller("rpToastCtrl",["$scope","$rootScope","$mdToast","toastMessage",function(e,t,r,i){e.toastMessage=i,e.closeToast=function(){r.close()}}]),rpControllers.controller("rpToolbarCtrl",["$scope","$rootScope","$log","$element","rpTitleChangeService","rpPostFilterButtonUtilService","rpUserFilterButtonUtilService","rpUserSortButtonUtilService","rpSearchFormUtilService","rpSearchFilterButtonUtilService","rpSidebarButtonUtilService","rpToolbarShadowUtilService",function(e,t,r,i,o,n,s,a,l,c,p,u){e.linkTitle=!1,e.isOpen=!1,e.colorLoaded=!1,e.count=0,e.showToolbarShadow=u.showToolbarShadow;var d=/r\/[\w]+/,m=/u\/[\w]+/,h=e.$on("show_toolbar_shadow_change",function(){e.showToolbarShadow=u.showToolbarShadow}),g=e.$on("handleTitleChange",function(t,r){e.toolbarTitle=o.title,e.linkTitle=d.test(o.title)||m.test(o.title)});e.showPostFilter=n.isVisible;var f=t.$on("post_filter_button_visibility",function(){e.showPostFilter=n.isVisible});e.showUserFilter=s.isVisible;var v=t.$on("user_filter_button_visibility",function(){e.showUserFilter=s.isVisible});e.showUserSort=a.isVisible;var b=t.$on("user_sort_button_visibility",function(){e.showUserSort=a.isVisible});e.showSearchFilter=c.isVisible;var S=t.$on("search_filter_button_visibility",function(){e.showSearchFilter=c.isVisible});e.showRules=p.isVisible;var $=t.$on("rules_button_visibility",function(){e.showRules=p.isVisible});e.toggleSearchForm=function(){e.showSearchForm=!e.showSearchForm},e.showSearchForm=l.isVisible;var w=t.$on("search_form_visibility",function(){}),C=t.$on("settings_changed",function(){e.colorLoaded=!0,C()});e.$on("$destroy",function(){h(),w(),f(),v(),b(),S(),$(),g(),C()})}]),rpControllers.controller("rpSubscribeCtrl",["$scope","$rootScope","rpSubredditsUtilService","rpSubscribeButtonUtilService",function(e,t,r,i){e.subscribed=r.subscribed,e.loadingSubscription=!1,e.toggleSubscription=function(){e.loadingSubscription=!0,r.subscribeCurrent(function(e,t){})},e.showSubscribe=i.isVisible;var o=t.$on("subscribe_visibility",function(){e.showSubscribe=i.isVisible}),n=t.$on("subscription_status_changed",function(t,r){e.loadingSubscription&&(e.loadingSubscription=!1),e.subscribed=r});e.$on("$destroy",function(){n(),o()})}]),rpControllers.controller("rpErrorCtrl",["$scope","$rootScope","$routeParams","rpSubscribeButtonUtilService","rpTitleChangeService",function(e,t,r,i,o){t.$emit("progressComplete"),i.hide(),o.prepTitleChange("oops"),e.errorCode=parseInt(r.errorcode)||404,404===e.errorCode?e.message="Did not find the page you're looking four-oh-four.":403===e.errorCode?e.message="Page is forbidden :/ Maybe you have to message the mods for permission.":e.message="Oops an error occurred."}]),rpControllers.controller("rpSidebarCtrl",["$scope","$rootScope","rpSubredditsUtilService",function(e,t,r){e.about=r.about.data;var i=t.$on("subreddits_about_updated",function(){e.about=r.about.data});e.$on("$destroy",function(){i()})}]),rpControllers.controller("rpFormattingCtrl",["$scope",function(e){e.formattingIsOpen=!1,e.toggleFormatting=function(t){e.formattingIsOpen=!e.formattingIsOpen}}]);var rpDeleteControllers=angular.module("rpDeleteControllers",[]);rpDeleteControllers.controller("rpDeleteButtonCtrl",["$scope",function(e){e.parentCtrl.isDeleting=!1,e.toggleDeleting=function(t){e.parentCtrl.isDeleting=!e.parentCtrl.isDeleting}}]),rpDeleteControllers.controller("rpDeleteFormCtrl",["$scope","rpDeleteUtilService",function(e,t){e.isDeleteInProgress=!1,e.submit=function(){e.isDeleteInProgress=!0,t(e.redditId,function(t,r){e.isDeleteInProgress=!1,t||e.parentCtrl.completeDeleting(e.redditId)})}}]);var rpDirectives=angular.module("rpDirectives",[]);rpDirectives.directive("rpLinkResponsiveAd",function(){return{restrict:"E",templateUrl:"partials/rpLinkResponsiveAd"}}),rpDirectives.directive("rpSidenavContent",function(){return{restrict:"E",replace:!0,templateUrl:"partials/rpSidenavContent"}}),rpDirectives.directive("rpToolbar",function(){return{restrict:"E",templateUrl:"partials/rpToolbar",controller:"rpToolbarCtrl"}}),rpDirectives.directive("rpSearchForm",function(){return{restrict:"E",templateUrl:"partials/rpSearchForm",replace:!0}}),rpDirectives.directive("rpSearchSidenavForm",function(){return{restrict:"E",templateUrl:"partials/rpSearchSidenavForm",replace:!0}}),rpDirectives.directive("rpGilded",function(){return{restrict:"E",templateUrl:"partials/rpGilded",scope:{parentCtrl:"=",author:"=",gilded:"="}}}),rpDirectives.directive("rpArticleContextButton",function(){return{restrict:"E",templateUrl:"partials/rpArticleContextButton",controller:"rpArticleButtonCtrl",scope:{parentCtrl:"=",post:"=",isComment:"=",message:"="}}}),rpDirectives.directive("rpArticleButton",function(){return{restrict:"E",templateUrl:"partials/rpArticleButton",controller:"rpArticleButtonCtrl",scope:{parentCtrl:"=",post:"=",isComment:"=",message:"="}}}),rpDirectives.directive("rpTabs",[function(){return{restrict:"E",templateUrl:"partials/rpTabs",controller:"rpTabsCtrl",replace:!0}}]),rpDirectives.directive("rpArticleTabs",function(){return{restrict:"E",templateUrl:"partials/rpArticleTabs",controller:"rpArticleTabsCtrl",replace:!0,scope:{parentCtrl:"=",tabs:"=",selectedIndex:"="}}}),rpDirectives.directive("rpShareButton",function(){return{restrict:"E",templateUrl:"partials/rpShareButton",controller:"rpShareButtonCtrl",scope:{post:"="}}}),rpDirectives.directive("rpGildButton",function(){return{restrict:"E",templateUrl:"partials/rpGildButton",controller:"rpGildButtonCtrl",scope:{redditId:"=",gilded:"="}}}),rpDirectives.directive("rpSaveButton",function(){return{restrict:"E",templateUrl:"partials/rpSaveButton",controller:"rpSaveButtonCtrl",scope:{redditId:"=",saved:"="}}}),rpDirectives.directive("rpReplyButton",function(){return{restrict:"E",templateUrl:"partials/rpReplyButton",controller:"rpReplyButtonCtrl",scope:{parentCtrl:"="}}}),rpDirectives.directive("rpEditButton",function(){return{restrict:"E",templateUrl:"partials/rpEditButton",controller:"rpEditButtonCtrl",scope:{parentCtrl:"="}}}),rpDirectives.directive("rpDeleteButton",function(){return{restrict:"E",templateUrl:"partials/rpDeleteButton",controller:"rpDeleteButtonCtrl",scope:{parentCtrl:"="}}}),rpDirectives.directive("rpEditForm",function(){return{restrict:"E",templateUrl:"partials/rpEditForm",controller:"rpEditFormCtrl",scope:{redditId:"=",parentCtrl:"=",editText:"="}}}),rpDirectives.directive("rpDeleteForm",function(){return{restrict:"E",templateUrl:"partials/rpDeleteForm",controller:"rpDeleteFormCtrl",scope:{redditId:"=",parentCtrl:"=",type:"="}}}),rpDirectives.directive("rpReplyForm",function(){return{restrict:"E",templateUrl:"partials/rpReplyForm",controller:"rpReplyFormCtrl",scope:{redditId:"=",parentCtrl:"=",post:"="}}}),rpDirectives.directive("rpScore",function(){return{restrict:"E",templateUrl:"partials/rpScore",controller:"rpScoreCtrl",scope:{score:"=",redditId:"=",likes:"="}}}),rpDirectives.directive("rpLink",function(){return{restrict:"E",templateUrl:"partials/rpLink",controller:"rpLinkCtrl",scope:{post:"=",parentCtrl:"=",identity:"=",showSub:"="}}}),rpDirectives.directive("rpSearchPost",function(){return{restrict:"E",templateUrl:"partials/rpSearchPost"}}),rpDirectives.directive("rpSearchLink",function(){return{restrict:"E",templateUrl:"partials/rpSearchLink"}}),rpDirectives.directive("rpSearchSub",function(){return{restrict:"E",templateUrl:"partials/rpSearchSub"}}),rpDirectives.directive("rpArticle",function(){return{restrict:"C",templateUrl:"partials/rpArticle",controller:"rpArticleCtrl",scope:{dialog:"=",post:"=",article:"=",subreddit:"=",comment:"="}}}),rpDirectives.directive("rpSettings",function(){return{restrict:"C",templateUrl:"partials/rpSettings",controller:"rpSettingsCtrl"}}),rpDirectives.directive("rpSubmitText",function(){return{restrict:"C",templateUrl:"partials/rpSubmitText"}}),rpDirectives.directive("rpSubmitLink",function(){return{restrict:"C",templateUrl:"partials/rpSubmitLink"}}),rpDirectives.directive("rpMessageCompose",function(){return{restrict:"C",templateUrl:"partials/rpMessageCompose",controller:"rpMessageComposeCtrl"}}),rpDirectives.directive("rpShareEmail",function(){return{restrict:"C",templateUrl:"partials/rpShareEmail",controller:"rpShareEmailCtrl"}}),rpDirectives.directive("rpCaptcha",function(){return{restrict:"E",templateUrl:"partials/rpCaptcha",controller:"rpCaptchaCtrl"}}),rpDirectives.directive("rpFormatting",function(){return{restrict:"E",templateUrl:"partials/rpFormatting",controller:"rpFormattingCtrl"}}),rpDirectives.directive("rpComment",["$compile","$rootScope","RecursionHelper",function(e,t,r){return{restrict:"E",replace:!0,scope:{comment:"=",cid:"=",depth:"=",post:"=",sort:"=",parent:"=",identity:"="},templateUrl:"partials/rpComment",controller:"rpCommentCtrl",compile:function(e){return r.compile(e,function(e,t,r,i,o){})}}}]),rpDirectives.directive("rpMessageComment",["$compile","$rootScope","RecursionHelper",function(e,t,r){return{restrict:"E",replace:!0,scope:{parentCtrl:"=",message:"=",depth:"=",identity:"="},templateUrl:"partials/rpMessageComment",compile:function(e){return r.compile(e,function(e,t,r,i,o){})},controller:"rpMessageCommentCtrl"}}]),rpDirectives.directive("rpCommentMedia",function(){return{restrict:"C",scope:{href:"@"},transclude:!0,replace:!0,templateUrl:"partials/rpCommentMedia"}}),rpDirectives.directive("compile",["$compile","$sce",function(e,t){return{link:function(r,i,o){var n=r.$watch(function(e){return t.parseAsHtml(o.compile)(e)},function(t){i.html(t),e(i.contents())(r),n()})}}}]),rpDirectives.directive("rpFab",["$rootScope",function(e){return{restrict:"C",link:function(t,r,i){var o=e.$on("scroll_down",function(){parseInt(r.children("ul").css("bottom"))>-100?r.children("ul").css("bottom","-=25"):r.children("ul").css("bottom","-100px")}),n=e.$on("scroll_up",function(){parseInt(r.children("ul").css("bottom"))<0?r.children("ul").css("bottom","+=25"):r.children("ul").css("bottom","0px")});t.$on("$destroy",function(){o(),n()})}}}]),rpDirectives.directive("rpFocusMe",["$timeout","$parse",function(e,t){return{restrict:"A",link:function(r,i,o){var n=t(o.rpFocusMe);r.$watch(n,function(t){t===!0&&e(function(){i[0].focus()})}),i.bind("blur",function(){r.$apply(n.assign(r,!1))})}}}]),rpDirectives.directive("rpToolbarSelectButton",[function(){return{restrict:"A",link:function(e,t,r){var i=r.rpToolbarSelectButton;t.click(function(){angular.element(i).trigger("click")})}}}]),rpDirectives.directive("rpInfiniteScroll",["$rootScope","debounce",function(e,t){return{restrict:"A",link:function(e,r,i){function o(){void 0!==e.noMorePosts&&e.noMorePosts!==!1||angular.element(n).outerHeight()-r.scrollTop()<=r.outerHeight()*s&&e.morePosts()}var n=i.rpInfiniteScrollDiv,s=i.rpInfiniteScrollDistance;r.on("scroll",function(){t(o(),500)})}}}]),rpDirectives.directive("rpColumnResize",["$rootScope","$window","debounce","mediaCheck",function(e,t,r,i){return{restrict:"A",link:function(t,r,o){function n(){return window.innerWidth===screen.width&&window.innerHeight===screen.height}var s=function(t){e.$emit("rp_window_resize",t)};i.init({scope:t,media:[{mq:"(max-width: 960px)",enter:function(e){n()||(t.columns=[1],s(1))}},{mq:"(min-width: 960px) and (max-width: 1550px)",enter:function(e){n()||(t.columns=[1,2],s(2))}},{mq:"(min-width: 1550px) and (max-width: 1700px)",enter:function(e){n()||(t.columns=[1,2,3],s(3))}},{mq:"(min-width: 1700px)",enter:function(e){n()||(t.columns=[1,2,3,4],s(4))}}]})}}}]),rpDirectives.directive("rpSuspendable",["$rootScope",function(e){return{link:function(t){function r(e,t){o[e.$id]=e.$$watchers,e.$$watchers=[],void 0!==e.$$childHead&&null!==e.$$childHead&&r(e.$$childHead,++t),void 0!==e.$$nextSibling&&null!==e.$$nextSibling&&r(e.$$nextSibling,++t)}function i(e,t){e.$$watchers&&0!==e.$$watchers.length?e.$$wactchers=e.$$watchers.concat(o[e.$id]):e.$$watchers=o[e.$id],o[e.id]=void 0,void 0!==e.$$childHead&&null!==e.$$childHead&&i(e.$$childHead,++t),void 0!==e.$$nextSibling&&null!==e.$$nextSibling&&i(e.$$nextSibling,++t)}var o={},n=e.$on("rp_suspendable_suspend",function(){o={},r(t,0)}),s=e.$on("rp_suspendable_resume",function(){i(t,0),o=void 0});t.$on("$destroy",function(){n(),s()})}}}]),rpDirectives.directive("rpPageContent",["$rootScope",function(e){return{restrict:"C",link:function(t,r,i){function o(){parseInt(r.css("top"))<0&&r.css("top","+="+l)}function n(){parseInt(r.css("top"))>-48&&r.css("top","-="+l)}function s(){parseInt(r.css("top"))<0&&r.css("top",0)}function a(){parseInt(r.css("top"))>-48&&r.css("top",-48)}var l=16,c=e.$on("scroll_down",function(){n()}),p=e.$on("scroll_up",function(){o()}),u=e.$on("rp_tabs_show",function(){s()}),d=e.$on("rp_tabs_hide",function(){a()});t.$on("$destroy",function(){c(),p(),u(),d()})}}}]),rpDirectives.directive("rpSidenavFooter",["$rootScope",function(e){return{restrict:"C",link:function(t,r,i){function o(){parseInt(r.css("margin-bottom"))<48&&r.css("margin-bottom","+="+l)}function n(){0!==parseInt(r.css("margin-bottom"))&&r.css("margin-bottom","-="+l)}function s(){parseInt(r.css("margin-bottom"))<48&&r.css("margin-bottom",48)}function a(){0!==parseInt(r.css("margin-bottom"))&&r.css("margin-bottom",0)}var l=16,c=e.$on("scroll_up",function(){o()}),p=e.$on("scroll_down",function(){n()}),u=e.$on("rp_tabs_show",function(){s()}),d=e.$on("rp_tabs_hide",function(){a()});t.$on("$destroy",function(){c(),p(),d(),u()})}}}]);var rpEditFormControllers=angular.module("rpEditFormControllers",[]);rpEditFormControllers.controller("rpEditButtonCtrl",["$scope",function(e){e.parentCtrl.isEditing=!1,e.toggleEditing=function(){e.parentCtrl.isEditing=!e.parentCtrl.isEditing}}]),rpEditFormControllers.controller("rpEditFormCtrl",["$scope","rpEditUtilService",function(e,t){e.submit=function(){e.inputIsDisabled=!0,e.isSubmitting=!0,t(e.editText,e.redditId,function(t,r){t||e.parentCtrl.completeEditing()})}}]);var rpFilters=angular.module("rpFilters",[]);rpFilters.filter("rp_open_link_new_window",[function(){return function(e){return e?e.replace(/&lt;a/g,'&lt;a target="_blank"'):void 0}}]),rpFilters.filter("rp_youtube_time_to_seconds",[function(){return function(e){var t=/^(?:([\d]+)h)?(?:([\d]+)m)?(?:([\d]+)s)?$/i,r=t.exec(e);if(r){var i=parseInt(r[1])||0,o=parseInt(r[2])||0,n=parseInt(r[3])||0;return 60*i*60+60*o+n}return 0}}]),rpFilters.filter("rp_hijack_reddit_link",[function(){return function(e){var t=/^(?:https?:\/\/)?(?:www\.)?(?:np\.)?(?:(?:reddit\.com)|(\/?r\/)|(\/?u\/)){1,2}([\S]+)?$/i,r=t.test(e);if(r){for(var i=t.exec(e),o="",n=1;n<i.length;n++)void 0!==i[n]&&(o+=i[n]);return o}return e}}]),rpFilters.filter("rp_link_id",[function(){return function(e){if(e){var t=/^\/r\/(?:[\w]+)\/comments\/([\w]+)/i,r=t.exec(e);return r[1]}return 0}}]),rpFilters.filter("rp_is_comment",[function(){return function(e){return"t1_"===e.substr(0,3)}}]),rpFilters.filter("rp_name_to_id36",[function(){return function(e){return e.substr(3)}}]),rpFilters.filter("rp_load_comment_media",[function(){return function(e){return e.replace(/<a/g,'<a class="rp-comment-media"')}}]),rpFilters.filter("rp_open_in_tab",[function(){return function(e){return e.replace(/<a/g,'<a target="_blank"')}}]),rpFilters.filter("rp_clean_title",["$log",function(e){return function(e){return e&&(e=e.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&nbsp;/gi," ")),e}}]),rpFilters.filter("rp_unescape_embed",["$sce",function(e){return function(t){if("undefined"!=typeof t&&""!==t){var r=angular.element("<div>"+t+"</div>").text();return e.trustAsHtml(r)}}}]),rpFilters.filter("rp_unescape_html",["$sce",function(e){return function(t){return angular.element("<div>"+e.trustAsHtml(t)+"</div>").text()}}]),rpFilters.filter("rp_trusted",["$sce",function(e){return function(t){return e.trustAsResourceUrl(t)}}]),rpFilters.filter("rp_media_type",[function(){return function(e){var t=/^https?:\/\/(?:i\.|m\.|edge\.|www\.)*imgur\.com\/(?:r\/[\w]+\/)*(?!gallery)(?!removalrequest)(?!random)(?!memegen)([\w]{5,7}(?:[&,][\w]{5,7})*)(?:#\d+)?[sbtmlh]?(\.(?:jpe?g|gif|png|gifv|webm))?(\?.*)?$/i,r=/^https?:\/\/(?:www\.)?(?:i\.|m\.)?imgur\.com\/(?:a|gallery)\/([\w]+)(\..+)?(?:\/)?(?:#?\w*)?(?:\?\_[\w]+\=[\w]+)?$/i,i=/^https?:\/\/(?:www\.|m\.)?youtube\.com\/watch\?.*v=([\w\-]+)/i,o=/^https?:\/\/(?:www\.)?youtu\.be\/([\w\-]+)/i,n=/^https?:\/\/(?:mobile\.)?twitter\.com\/(?:#!\/)?[\w]+\/status(?:es)?\/([\d]+)/i,s=/^https?:\/\/(?:[\w]+.)?gfycat\.com\/(\w+)(?:\.gif)?/i,a=/^http:\/\/(?:www\.)?giphy\.com\/gifs\/(.*?)(\/html5)?$/i,l=/^http:\/\/(?:www\.)?(?:i\.)?giphy\.com\/([\w]+)(?:.gif)?/i,c=/^https?:\/\/(?:www\.)?(?:media[0-9]?\.)?(?:i\.)?giphy\.com\/(?:media\/)?([\w]+)(?:.gif)?/i;
return t.test(e)?"imgur":r.test(e)?"imgurAlbum":i.test(e)||o.test(e)?"youtube":n.test(e)?"twitter":s.test(e)?"gfycat":a.test(e)||l.test(e)||c.test(e)?"giphy":null}}]);var rpGildControllers=angular.module("rpGildControllers",[]);rpGildControllers.controller("rpGildButtonCtrl",["$scope","rpGildUtilService","rpAuthUtilService","rpToastUtilService",function(e,t,r,i){e.gild=function(){r.isAuthenticated?t(e.redditId,function(t,r){t||e.gilded++}):i("You've got to log in to gild posts")}}]);var rpImgurUtilServices=angular.module("rpImgurUtilServices",[]);rpImgurUtilServices.factory("rpImgurPreloaderUtilService",["$q","$rootScope",function(e,t){function r(t){this.imageLocations=t,this.imageCount=this.imageLocations.length,this.loadCount=0,this.errorCount=0,this.states={PENDING:1,LOADING:2,RESOLVED:3,REJECTED:4},this.state=this.states.PENDING,this.deferred=e.defer(),this.promise=this.deferred.promise}return r.preloadImages=function(e){var t=new r(e);return t.load()},r.prototype={constructor:r,isInitiated:function(){return this.state!==this.states.PENDING},isRejected:function(){return this.state===this.states.REJECTED},isResolved:function(){return this.state===this.states.RESOLVED},load:function(){if(this.isInitiated())return this.promise;this.state=this.states.LOADING;for(var e=0;e<this.imageCount;e++)this.loadImageLocation(this.imageLocations[e]);return this.promise},handleImageError:function(e){this.errorCount++,this.isRejected()||(this.state=this.states.REJECTED,this.deferred.reject(e))},handleImageLoad:function(e){this.loadCount++,this.isRejected()||(this.deferred.notify({percent:Math.ceil(this.loadCount/this.imageCount*100),imageLocation:e}),this.loadCount===this.imageCount&&(this.state=this.states.RESOLVED,this.deferred.resolve(this.imageLocations)))},loadImageLocation:function(e){var r=this,i=$(new Image).load(function(e){t.$apply(function(){r.handleImageLoad(e.target.src),r=i=e=null})}).error(function(e){t.$apply(function(){r.handleImageError(e.target.src),r=i=e=null})}).prop("src",e)}},r}]);var rpLinkControllers=angular.module("rpLinkControllers",[]);rpLinkControllers.controller("rpLinkCtrl",["$scope","$filter","$mdDialog","rpLocationUtilService",function(e,t,r,i){angular.isUndefined(e.post.isAd)&&(e.post.isAd=!1),e.post.isAd===!1&&(e.isComment=t("rp_is_comment")(e.post.data.name),e.isMine=e.identity?e.post.data.author===e.identity.name:!1,e.thisController=this,this.completeDeleting=function(t){e.parentCtrl.completeDeleting(t)},this.completeReplying=function(t){e.postComment=t.json.data.things[0],e.post.data.num_comments++})}]);var rpMediaControllers=angular.module("rpMediaControllers",[]);rpMediaControllers.controller("rpMediaCtrl",["$scope","$timeout","rpSettingsUtilService",function(e,t,r){e.post&&(e.post.data.title.toLowerCase().indexOf("nsfw")>0&&(e.showWarning=!0,e.warningText="nsfw"),e.post.data.title.toLowerCase().indexOf("nsfl")>0&&(e.showWarning=!0,e.warningText="nsfl"),e.post.data.title.toLowerCase().indexOf("gore")>0&&(e.showWarning=!0,e.warningText="gore"),!e.warningText&&e.post.data.link_flair_text&&(e.warningText=e.post.data.link_flair_text),e.post.data.over_18&&(e.showWarning=!0,e.showWarning=r.settings.over18,e.warningText||(e.warningText="over 18"))),e.showMedia=function(){e.showWarning=!1}}]),rpMediaControllers.controller("rpMediaDefaultCtrl",["$scope","$timeout",function(e,t){".jpg"===e.url.substr(e.url.length-4)||".jpeg"===e.url.substr(e.url.length-5)||".png"===e.url.substr(e.url.length-4)||".bmp"===e.url.substr(e.url.length-4)?(e.playable=!1,e.imageUrl=e.url):".gif"===e.url.substr(e.url.length-4)||e.url.length-5===".gifv"?(e.defaultType="gif",e.gifUrl=e.url,e.playable=!0):".webm"===e.url.substr(e.url.length-5)?(e.defaultType="video",e.webmUrl=e.url,e.playable=!0):".mp4"===e.url.substr(e.url.length-4)?(e.defaultType="video",e.mp4Url=e.url,e.playable=!0):e.post&&(e.post.data.media?"video"===e.post.data.media.oembed.type&&(e.defaultType="embed",e.playable=!0):e.post.data.thumbnail&&(e.playable=!1,e.imageUrl=e.post.data.thumbnail)),e.playable&&e.post&&e.post.data.thumbnail&&(e.thumbnailUrl=e.post.data.thumbnail),e.showPlayable=!1,e.show=function(){e.showPlayable=!0},e.hide=function(){e.showPlayable=!1}}]),rpMediaControllers.controller("rpMediaGiphyCtrl",["$scope",function(e){var t,r=/^http:\/\/(?:www\.)?giphy\.com\/gifs\/(.*?)(\/html5)?$/i,i=/^http:\/\/(?:www\.)?(?:i\.)?giphy\.com\/([\w]+)(?:.gif)?/i,o=/^https?:\/\/(?:www\.)?(?:media[0-9]?\.)?(?:i\.)?giphy\.com\/(?:media\/)?([\w]+)(?:.gif)?/i;r.test(e.url)?t=r.exec(e.url):i.test(e.url)?t=i.exec(e.url):o.test(e.url)&&(t=o.exec(e.url)),e.giphyType=t[2]?"video":"image",t&&(e.thumbnailUrl="http://media.giphy.com/media/"+t[1]+"/200_s.gif","image"===e.giphyType?e.imageUrl="http://media.giphy.com/media/"+t[1]+"/giphy.gif":"video"===e.giphyType&&(e.videoUrl="http://media.giphy.com/media/"+t[1]+"/giphy.mp4")),e.show=function(){e.showGif=!0},e.hide=function(){e.showGif=!1}}]),rpMediaControllers.controller("rpMediaGfycatCtrl",["$scope",function(e){var t=/(^https?:\/\/[\w]?\.?)?gfycat\.com\/(\w+)(\.gif)?/i,r=t.exec(e.url);r[3]&&".gif"==r[3]?e.gfycatType="image":e.gfycatType="video",e.showGif=!1;var i="https://";r&&(e.dataId=r[2],e.thumbnailUrl="http://thumbs.gfycat.com/"+r[2]+"-poster.jpg","image"===e.gfycatType?e.imageUrl=i+"gfycat.com/"+r[2]+".gif":"video"===e.gfycatType&&(e.zippyVideoUrl="http://zippy.gfycat.com/"+r[2]+".webm",e.fatVideoUrl="http://fat.gfycat.com/"+r[2]+".webm",e.giantVideoUrl="http://giant.gfycat.com/"+r[2]+".webm")),e.show=function(){e.showGif=!0},e.hide=function(){e.showGif=!1}}]),rpMediaControllers.controller("rpMediaTwitterCtrl",["$scope","$sce","rpTweetResourceService",function(e,t,r){e.tweet="";var i=/^https?:\/\/(?:mobile\.)?twitter\.com\/(?:#!\/)?[\w]+\/status(?:es)?\/([\d]+)/i,o=i.exec(e.url);if(o){r.get({id:o[1]},function(r){e.tweet=t.trustAsHtml(r.html)})}}]),rpMediaControllers.controller("rpMediaYoutubeCtrl",["$scope","$sce","$filter",function(e,t,r){var i,o=/^https?:\/\/(?:www\.|m\.)?youtube\.com\/watch\?.*v=([\w\-]+)/i,n=/^https?:\/\/(?:www\.)?youtu\.be\/([\w\-]+)(\?t=[\w]+)?/i,s=/\?t\=[\w+]+/i;if(i=o.exec(e.url),i||(i=n.exec(e.url)),i){e.thumbnailUrl="https://img.youtube.com/vi/"+i[1]+"/default.jpg";var a="http://www.youtube.com/embed/"+i[1]+"?autoplay=1";if(i[2]&&s.test(i[2])){var l=r("rp_youtube_time_to_seconds")(i[2].replace("?t=",""));a+="&start="+l}e.embedUrl=t.trustAsResourceUrl(a)}e.showYoutubeVideo=!1,e.show=function(){e.showYoutubeVideo=!0},e.hide=function(){e.showYoutubeVideo=!1}}]),rpMediaControllers.controller("rpMediaImgurCtrl",["$scope",function(e){var t=/^https?:\/\/(?:i\.|m\.|edge\.|www\.)*imgur\.com\/(?:r\/[\w]+\/)*(?!gallery)(?!removalrequest)(?!random)(?!memegen)([\w]{5,7}(?:[&,][\w]{5,7})*)(?:#\d+)?[sbtmlh]?(\.(?:jpe?g|gif|png|gifv|webm))?(\?.*)?$/i,r=t.exec(e.url),i=r[2]||".jpg";".gif"==i||".gifv"==i||".webm"==i?e.imgurType="video":e.imgurType="image",r&&(e.thumbnailUrl="http://i.imgur.com/"+r[1]+"t.jpg","image"===e.imgurType?e.imageUrl=r[1]?"http://i.imgur.com/"+r[1]+i:e.url:"video"===e.imgurType&&(e.webmUrl="http://i.imgur.com/"+r[1]+".webm",e.mp4Url="http://i.imgur.com/"+r[1]+".mp4")),e.showGif=!1,e.show=function(){e.showGif=!0},e.hide=function(){e.showGif=!1}}]),rpMediaControllers.controller("rpMediaImgurAlbumCtrl",["$scope","$log","$filter","$routeParams","rpImgurAlbumResourceService","rpImgurGalleryResourceService","rpImgurPreloaderUtilService",function(e,t,r,i,o,n,s){function a(){e.currentImageUrl=e.album.data.images[p].link,e.imageDescription=e.album.data.images[p].description,e.imageDescriptionLinky=r("linky")(e.album.data.images[p].description,"_blank"),e.imageTitle=e.album.data.images[p].title,e.currentImage=p+1}function l(e,t){for(var r=0;r<t.length;r++)if(t[r].id==e)return r}function c(e){if(e&&"undefined"!==e){var t=[];e.forEach(function(e,r){t.push(e.link)}),s.preloadImages(t).then(function(e){},function(e){},function(e){})}}var p=0,u="",d=2;e.currentImage=0,e.currentImageUrl="",e.imageDescription="",e.imageTitle="";var m=/^https?:\/\/(?:i\.|m\.)?imgur\.com\/(?:a|gallery)\/([\w]+)(\..+)?(?:\/)?(?:#?\w*)?(?:\?\_[\w]+\=[\w]+)?$/i,h=m.exec(e.url),g=h[1];if(g.indexOf(",")>0){var f=[],v=g.split(",");v.forEach(function(e,t){f.push({link:"http://i.imgur.com/"+e+".jpg"})}),e.album={data:{images_count:v.length,images:f}},a(),c(e.album.data.images.slice(1,d))}else e.url.indexOf("/gallery/")>0?n.get({id:g},function(t){if(t.data.is_album)e.album=t,u&&(p=l(u,e.album.data.images)),a(),c(e.album.data.images.slice(1,d));else{var r=[];r[0]={link:t.data.link},e.album={data:{images_count:1,images:r}},a(),c(e.album.data.images.slice(1,d))}},function(e){t.log("Error retrieving Gallery data, "+g),t.log(e)}):o.get({id:g},function(t){e.album=t,u&&(p=l(u,e.album.data.images)),a(),c(e.album.data.images.slice(1,d))},function(t){var r=[];r[0]={link:"http://i.imgur.com/"+g+".jpg"},e.album={data:{images_count:1,images:r}},a(),c(e.album.data.images.slice(1,d))});e.prev=function(t){e.$emit("album_image_change"),--p<0&&(p=t-1),a()},e.next=function(t){e.$emit("album_image_change"),++p==t?p=0:c(e.album.data.images.slice(p+d-1,p+d)),a()}}]);var rpMediaDirectives=angular.module("rpMediaDirectives",[]);rpMediaDirectives.directive("rpMedia",function(){return{restrict:"E",templateUrl:"partials/rpMedia",controller:"rpMediaCtrl",scope:{url:"=",post:"="}}}),rpMediaDirectives.directive("rpMediaImgur",function(){return{restrict:"E",templateUrl:"partials/rpMediaImgur",controller:"rpMediaImgurCtrl"}}),rpMediaDirectives.directive("rpMediaImgurAlbum",function(){return{restrict:"E",templateUrl:"partials/rpMediaImgurAlbum",controller:"rpMediaImgurAlbumCtrl"}}),rpMediaDirectives.directive("rpMediaYoutube",function(){return{restrict:"E",templateUrl:"partials/rpMediaYoutube",controller:"rpMediaYoutubeCtrl"}}),rpMediaDirectives.directive("rpMediaTwitter",function(){return{restrict:"E",templateUrl:"partials/rpMediaTwitter",controller:"rpMediaTwitterCtrl"}}),rpMediaDirectives.directive("rpMediaGfycat",function(){return{restrict:"E",templateUrl:"partials/rpMediaGfycat",controller:"rpMediaGfycatCtrl"}}),rpMediaDirectives.directive("rpMediaGiphy",function(){return{restrict:"E",templateUrl:"partials/rpMediaGiphy",controller:"rpMediaGiphyCtrl"}}),rpMediaDirectives.directive("rpMediaDefault",function(){return{restrict:"E",templateUrl:"partials/rpMediaDefault",controller:"rpMediaDefaultCtrl"}}),rpMediaDirectives.directive("rpMediaImgurAlbumWrapper",function(){return{restrict:"C",link:function(e,t,r){t.children("img").load(function(){t.children(".rp-media-imgur-album-progress").hide()}),e.$on("album_image_change",function(){t.children(".rp-media-imgur-album-progress").show()})}}}),rpMediaDirectives.directive("rpMediaDefaultEmbed",["$compile",function(e){return{restrict:"E",scope:{oembed:"="},compile:function(e,t){},link:function(e){}}}]);var rpMessageControllers=angular.module("rpMessageControllers",[]);rpMessageControllers.controller("rpMessageCtrl",["$scope","$rootScope","$routeParams","rpMessageUtilService","rpIdentityUtilService","rpTitleChangeService","rpPostFilterButtonUtilService","rpUserFilterButtonUtilService","rpUserSortButtonUtilService","rpSubscribeButtonUtilService","rpSearchFormUtilService","rpSearchFilterButtonUtilService","rpToolbarShadowUtilService","rpReadAllMessagesUtilService","rpLocationUtilService","rpSidebarButtonUtilService","rpSettingsUtilService","rpReadMessageUtilService",function(e,t,r,i,o,n,s,a,l,c,p,u,d,m,h,g,f,v){function b(){e.messages={},e.havePosts=!1,e.hasMail=!1,e.noMorePosts=!1,t.$emit("progressLoading"),i(w,"",$,function(r,i){if(t.$emit("progressComplete"),r);else if(e.noMorePosts=i.get.data.children.length<$,e.messages=i.get.data.children,e.havePosts=!0,"unread"===w){for(var o=[],n=0;n<e.messages.length;n++)o.push(e.messages[n].data.name);var s=o.join(", ");v(s,function(i){r||(e.hasMail=!1,t.$emit("rp_messages_read"))})}})}s.hide(),c.hide(),a.hide(),l.hide(),p.hide(),u.hide(),d.hide(),g.hide();var S=!1;e.noMorePosts=!1;var $=25;n.prepTitleChange("Messages");var w=r.where||"inbox",C=[{label:"all",value:"inbox"},{label:"unread",value:"unread"},{label:"messages",value:"messages"},{label:"comment replies",value:"comments"},{label:"post replies",value:"selfreply"},{label:"username mentions",value:"mentions"}];t.$emit("rp_tabs_changed",C),t.$emit("rp_tabs_show"),o.reloadIdentity(function(r){e.identity=r,e.hasMail=e.identity.has_mail,e.hasMail&&"unread"!==w&&(w="unread",h(null,"/message/"+w,"",!1,!0));for(var i=0;i<C.length;i++)if(w===C[i].value){t.$emit("rp_tabs_selected_index_changed",i);break}b()});var y=t.$on("rp_tab_click",function(e,t){w=t,h(null,"/message/"+w,"",!1,!1),b()});e.thisController=this,e.morePosts=function(){if(e.messages&&e.messages.length>0){var r=e.messages[e.messages.length-1].data.name;r&&!S&&(S=!0,t.$emit("progressLoading"),i(w,r,$,function(r,i){t.$emit("progressComplete"),r||(e.noMorePosts=i.get.data.children.length<25,Array.prototype.push.apply(e.messages,i.get.data.children),S=!1)}))}},e.$on("$destroy",function(){y(),t.$emit("rp_tabs_hide")})}]),rpMessageControllers.controller("rpMessageCommentCtrl",["$scope","$filter","$mdDialog","rpIdentityUtilService","rpLocationUtilService",function(e,t,r,i,o){e.identity,e.childDepth=e.depth+1,e.isReplying=!1,e.thisController=this,this.completeReplying=function(t,r){this.isReplying=!1,"t1"===e.message.kind?e.comments=t.json.data.things:"t4"===e.message.kind&&(e.message.data.replies?e.message.data.replies.data.children.push(t.json.data.things[0]):e.message.data.replies={data:{children:t.json.data.things}})}}]),rpMessageControllers.controller("rpMessageSidenavCtrl",["$scope","$rootScope","$mdDialog","rpSettingsUtilService","rpLocationUtilService","rpIdentityUtilService",function(e,t,r,i,o,n){e.isOpen=!1,e.toggleOpen=function(){e.isOpen=!e.isOpen},e.hasMail=!1,n.getIdentity(function(t){e.hasMail=t.has_mail}),e.showCompose=function(e){i.settings.composeDialog?r.show({controller:"rpMessageComposeDialogCtrl",templateUrl:"partials/rpMessageComposeDialog",targetEvent:e,clickOutsideToClose:!1,escapeToClose:!1,locals:{shareLink:null,shareTitle:null}}):o(e,"/message/compose","",!0,!1)},e.showInbox=function(e){o(e,"/message/inbox","",!0,!1)},e.showSent=function(e){o(e,"/message/sent","",!0,!1)};var s=t.$on("rp_messages_read",function(){e.hasMail=!1});e.$on("$destroy",function(){s()})}]),rpMessageControllers.controller("rpMessageComposeCtrl",["$scope","$mdDialog","rpLocationUtilService","rpSubredditsUtilService",function(e,t,r,i){null!==e.shareLink&&void 0!==e.shareLink?e.title="Share a link with a reddit user":e.title="Send a message"}]),rpMessageControllers.controller("rpMessageComposeDialogCtrl",["$scope","$location","$mdDialog","shareLink","shareTitle",function(e,t,r,i,o){e.shareLink=i||null,e.shareTitle=o||null,e.dialog=!0;var n=e.$on("$locationChangeSuccess",function(){r.hide()});e.$on("$destroy",function(){n()})}]),rpMessageControllers.controller("rpMessageComposeFormCtrl",["$scope","$rootScope","$mdDialog","rpMessageComposeUtilService","rpLocationUtilService",function(e,t,r,i,o){function n(){e.subject="",e.text="",e.to="",e.rpMessageComposeForm.$setUntouched()}e.messageSending=!1,e.showSend=!0,null!==e.shareLink&&void 0!==e.shareLink&&(e.text="Check this out, ["+e.shareTitle+"]("+e.shareLink+")"),e.closeDialog=function(t){e.dialog?(n(),r.hide()):o(t,"/","",!0,!1)},e.sendMessage=function(){e.messageSending=!0,i(e.subject,e.text,e.to,e.iden,e.captcha,function(r,i){e.messageSending=!1,r?"BAD_CAPTCHA"===r.json.errors[0][0]?(t.$emit("reset_captcha"),e.feedbackMessage="You entered the CAPTCHA incorrectly. Please try again.",e.showFeedbackAlert=!0,e.showFeedback=!0,e.showButtons=!0):(t.$emit("reset_captcha"),e.feedbackMessage=r.json.errors[0][1],e.showFeedbackAlert=!0,e.showFeedback=!0):(e.feedbackMessage="Your message was sent successfully :)",e.showFeedbackAlert=!1,e.showFeedback=!0,e.showSendAnother=!0,e.showSend=!1)})},e.sendAnother=function(){n(),t.$emit("reset_captcha"),e.showFeedback=!1,e.showSendAnother=!1,e.showSend=!0}}]);var rpPostControllers=angular.module("rpPostControllers",[]);rpPostControllers.controller("rpPostsCtrl",["$scope","$rootScope","$routeParams","$window","$filter","$timeout","$q","rpPostsUtilService","rpTitleChangeService","rpUserFilterButtonUtilService","rpUserSortButtonUtilService","rpSubscribeButtonUtilService","rpSettingsUtilService","rpSubredditsUtilService","rpLocationUtilService","rpSearchFormUtilService","rpSearchFilterButtonUtilService","rpSidebarButtonUtilService","rpToolbarShadowUtilService","rpAuthUtilService","rpIdentityUtilService","rpPostFilterButtonUtilService",function(e,t,r,i,o,n,s,a,l,c,p,u,d,m,h,g,f,v,b,S,$,w){function C(){e.posts=[],e.havePosts=!1,e.noMorePosts=!1,t.$emit("progressLoading"),a(e.subreddit,e.sort,"",k,A,function(r,i){if(t.$emit("progressComplete"),r);else if(e.havePosts=!0,i.get.data.children.length<A&&(e.noMorePosts=!0),i.get.data.children.length>0){"random"===e.subreddit&&(e.subreddit=i.get.data.children[0].data.subreddit,l.prepTitleChange("r/"+e.subreddit),h(null,"/r/"+e.subreddit,"",!1,!0));for(var o=1;o<i.get.data.children.length;o++)o%4===0?i.get.data.children.splice(o,0,{isAd:!0}):i.get.data.children[o].isAd=!1;y(i.get.data.children)}})}function y(t){for(var r=!1,i=0;i<e.posts.length;i++)if(e.isAd===!1&&e.posts[i].data.id===t[0].data.id){r=!0;break}var o=t.shift();r||(o.column=U(),e.posts.push(o)),n(function(){t.length>0&&y(t)},150)}function U(){var e,t,r=angular.element(".rp-col-wrapper");return r.each(function(r){var i=jQuery(this).height();(angular.isUndefined(e)||t>i)&&(t=i,e=r)}),e}var _=[{label:"hot",value:"hot"},{label:"new",value:"new"},{label:"rising",value:"rising"},{label:"controversial",value:"controversial"},{label:"top",value:"top"},{label:"gilded",value:"gilded"}];t.$emit("rp_tabs_changed",_),t.$emit("rp_tabs_show"),c.hide(),p.hide(),g.hide(),f.hide(),b.hide(),e.subreddit=r.sub,e.sort=r.sort?r.sort:"hot";var k=r.t?r.t:"week",R=!1;e.showSub=!0;for(var A=12,T=12,M=0;M<_.length;M++)if(e.sort===_[M].value){t.$emit("rp_tabs_selected_index_changed",M),3===M||4===M?w.show():w.hide();break}angular.isUndefined(e.subreddit)&&l.prepTitleChange("frontpage"),(angular.isUndefined(e.subreddit)||"all"===e.subreddit)&&(u.hide(),e.showSub=!0,v.hide()),angular.isUndefined(e.subreddit)||"all"===e.subreddit||(e.showSub=!1,l.prepTitleChange("r/"+e.subreddit),m.setSubreddit(e.subreddit),u.show(),v.show()),S.isAuthenticated&&$.getIdentity(function(t){e.identity=t}),C();var D=t.$on("t_click",function(t,r){k=r,e.subreddit?h(null,"/r/"+e.subreddit+"/"+e.sort,"t="+k,!1,!1):h(null,e.sort,"t="+k,!1,!1),C()});e.thisController=this,this.completeDeleting=function(t){e.posts.forEach(function(r,i){r.data.name===t&&e.posts.splice(i,1)})};var P=t.$on("rp_tab_click",function(t,r){e.posts={},e.noMorePosts=!1,e.sort=r,e.subreddit?h(null,"/r/"+e.subreddit+"/"+e.sort,"",!1,!1):h(null,e.sort,"",!1,!1),"top"===r||"controversial"===r?w.show():w.hide(),C()});e.showContext=function(e,t){h(e,"/r/"+t.data.subreddit+"/comments/"+o("rp_name_to_id36")(t.data.link_id)+"/"+t.data.id+"/","context=8",!0,!1)},e.morePosts=function(){if(e.posts&&e.posts.length>0){var r=e.posts[e.posts.length-1].data.name;r&&!R&&(R=!0,t.$emit("progressLoading"),a(e.subreddit,e.sort,r,k,T,function(r,i){t.$emit("progressComplete"),r||(i.get.data.children.length<T?e.noMorePosts=!0:e.noMorePosts=!1,i.get.data.children.length>0?y(i.get.data.children):(R=!1,e.morePosts()),R=!1)}))}};var E=t.$on("rp_window_resize",function(t,r){if(!angular.isUndefined(e.posts))for(var i=0;i<e.posts.length;i++)e.posts[i].column=i%r});e.$on("$destroy",function(){D(),P(),E(),t.$emit("rp_tabs_hide")})}]),rpPostControllers.controller("rpPostsTimeFilterCtrl",["$scope","$rootScope","$routeParams",function(e,t,r){var i=t.$on("$routeChangeSuccess",function(){e.postTime=r.t||"week"});e.selectTime=function(e){t.$emit("t_click",e)},e.$on("$destroy",function(){i()})}]),rpPostControllers.controller("rpPostFabCtrl",["$scope","$rootScope","$mdDialog","rpAuthUtilService","rpToastUtilService","rpSettingsUtilService","rpLocationUtilService",function(e,t,r,i,o,n,s){e.fabState="closed",e.newLink=function(t){i.isAuthenticated?(n.settings.submitDialog?r.show({controller:"rpSubmitDialogCtrl",templateUrl:"partials/rpSubmitLinkDialog",targetEvent:t,locals:{subreddit:e.subreddit},clickOutsideToClose:!0,escapeToClose:!1}):s(null,"/submitLink","",!0,!1),e.fabState="closed"):(e.fabState="closed",o("You've got to log in to submit a link"))},e.newText=function(t){i.isAuthenticated?(n.settings.submitDialog?r.show({controller:"rpSubmitDialogCtrl",templateUrl:"partials/rpSubmitTextDialog",targetEvent:t,locals:{subreddit:e.subreddit},clickOutsideToClose:!0,escapeToClose:!1}):s(null,"/submitText","",!0,!1),e.fabState="closed"):(e.fabState="closed",o("You've got to log in to submit a self post"))},e.$on("$destroy",function(){})}]);var rpProgressControllers=angular.module("rpProgressControllers",[]);rpProgressControllers.controller("rpIndeterminateProgressCtrl",["$scope","$rootScope","$log","$timeout",function(e,t,r,i){e.loading=!1;var o=t.$on("progressLoading",function(t,r){e.loading=!0}),n=t.$on("progressComplete",function(t,r){e.loading=!1});t.$on("$locationChangeStart",function(){e.loading=!0}),t.$on("$locationChangeSuccess",function(){e.loading=!1}),e.$on("$destroy",function(){o(),n()})}]),rpProgressControllers.controller("rpDeterminateProgressCtrl",["$scope","$rootScope","$log","$timeout","$interval","debounce",function(e,t,r,i,o,n){function s(){e.value<10&&(e.value=10),c=o(function(){e.value<90&&a()},200,20,!0)}function a(){var t=0,r=e.value/100;t=r>=0&&.25>r?.2:r>=.25&&.65>r?.1:r>=.65&&.9>r?.05:0,e.value+=100*t}e.value=0,e.loading=!1;var l,c,p=t.$on("progressLoading",function(t,r){e.loading===!1&&(e.loading=!0,s())}),u=t.$on("progressComplete",function(t,r){c&&o.cancel(c),l=o(function(){e.value<100?e.value=e.value+2:(o.cancel(l),i(function(){e.loading=!1,e.value=0},500))},200,5,!0)});e.$on("$destroy",function(){p(),deregisterProgress(),u()})}]);var rpRedditApiServices=angular.module("rpRedditApiServices",[]);rpRedditApiServices.factory("rpRedditApiServerResourceService",["$resource",function(e){return e("/api/generic")}]),rpRedditApiServices.factory("rpRedditApiService",["$window","rpServerRefreshTokenResourceService","rpUserRefreshTokenResourceService","rpAuthUtilService","rpRedditApiServerResourceService",function(e,t,r,i,o){function n(e){i.isAuthenticated?void 0!==l?e(l):r.get({},function(t){l=new c(d[t.env]),l.refresh(t.refreshToken).then(function(){e(l)})["catch"](function(t){t.responseError=!0,e(t)}),setTimeout(function(){s(l,t.refreshToken).then(function(){})["catch"](function(t){t.responseError=!0,e(t)})},u)}):void 0!==a?e(a):t.get({},function(t){a=new c(m[t.env]),a.refresh(t.refreshToken).then(function(){e(a)}),setTimeout(function(){s(a,t.refreshToken)},u)})}function s(e,t){e.refresh(t).then(function(){s(e,t)},u)}var a,l,c=e.Snoocore,p=(e.when,{}),u=354e4;p.redditRequest=function(e,t,r,i){n(function(n){n(t)[e](r).then(function(e){throw new Error})["catch"](function(n){o.save({uri:t,params:r,method:e},function(e){i(e.responseError?e:e.transportWrapper)})})})};var d={development:{userAgent:"paper for reddit: reddit material design",oauth:{type:"explicit",duration:"permanent",key:"Gpy69vUdPU_-MA",secret:"zlcuxzzwfexoVKpYatn_1lfZslI",redirectUri:"http://localhost:3000/auth/reddit/callback",scope:["identity","edit","flair","history","mysubreddits","privatemessages","read","report","save","submit","subscribe","vote","creddits"]}},demo:{userAgent:"paper for reddit: reddit material design",oauth:{type:"explicit",duration:"permanent",key:"mxKozRXrp3xAIg",secret:"wYJ0AUzbKUjgMbVlzXO5KzHzpVo",redirectUri:"http://www.reddup.co/auth/reddit/callback",scope:["identity","edit","flair","history","mysubreddits","privatemessages","read","report","save","submit","subscribe","vote","creddits"]}}},m={development:{userAgent:"paper for reddit: reddit material design",oauth:{type:"explicit",duration:"permanent",key:"uo6XXqf-WF43Wg",secret:"_cgKzeyu52HPSMrCFcxkXdPXS04",redirectUri:"http://localhost:3000/auth/reddit/appcallback",scope:["identity","edit","flair","history","mysubreddits","privatemessages","read","report","save","submit","subscribe","vote","creddits"]}},demo:{userAgent:"paper for reddit: reddit material design",oauth:{type:"explicit",duration:"permanent",key:"uo6XXqf-WF43Wg",secret:"_cgKzeyu52HPSMrCFcxkXdPXS04",redirectUri:"http://www.reddup.co/auth/reddit/appcallback",scope:["identity","edit","flair","history","mysubreddits","privatemessages","read","report","save","submit","subscribe","vote","creddits"]}}};return p}]);var rpReplyFormControllers=angular.module("rpReplyFormControllers",[]);rpReplyFormControllers.controller("rpReplyButtonCtrl",["$scope",function(e){e.parentCtrl.isReplying=!1,e.toggleReplying=function(){e.parentCtrl.isReplying=!e.parentCtrl.isReplying}}]),rpReplyFormControllers.controller("rpReplyFormCtrl",["$scope","rpCommentUtilService",function(e,t){e.submit=function(){t(e.redditId,e.reply,function(t,r){t||(e.reply="",e.replyForm.$setUntouched(),e.replyForm.$setPristine(),e.parentCtrl.completeReplying&&e.parentCtrl.completeReplying(r,e.post))})}}]);var rpResourceServices=angular.module("rpResourceServices",["ngResource"]);rpResourceServices.factory("rpUserRefreshTokenResourceService",["$resource",function(e){return e("/auth/usertoken")}]),rpResourceServices.factory("rpServerRefreshTokenResourceService",["$resource",function(e){return e("/auth/servertoken")}]),rpResourceServices.factory("rpSubredditAboutResourceService",["$resource",function(e){return e("/api/about/:sub")}]),rpResourceServices.factory("rpReadAllMessagesResourceService",["$resource",function(e){return e("/api/uauth/read_all_messages")}]),rpResourceServices.factory("rpReadMessageResourceService",["$resource",function(e){return e("/api/uauth/read_message")}]),rpResourceServices.factory("rpSubbscribeResourceService",["$resource",function(e){return e("/api/uauth/subscribe")}]),rpResourceServices.factory("rpIdentityResourceService",["$resource",function(e){return e("/api/uauth/me")}]),rpResourceServices.factory("rpByIdResourceService",["$resource",function(e){return e("/api/by_id/:name")}]),rpResourceServices.factory("rpSubredditsResourceService",["$resource",function(e){return e("/api/subreddits/:where",{where:"default",limit:50})}]),rpResourceServices.factory("rpSubredditsMineResourceService",["$resource",function(e){return e("/api/uauth/subreddits/mine/:where",{where:"subscriber",limit:50,after:""})}]),rpResourceServices.factory("rpPostsResourceService",["$resource",function(e){return e("/api/subreddit/:sub/:sort")}]),rpResourceServices.factory("rpFrontpageResourceService",["$resource",function(e){return e("/api/:sort",{sort:"hot",after:"none",t:"none",limit:"limit"})}]),rpResourceServices.factory("rpUserResourceService",["$resource",function(e){return e("/api/user/:username/:where",{username:"",where:"overview",sort:"new",after:"none",t:"none"})}]),rpResourceServices.factory("rpCommentsResourceService",["$resource",function(e){return e("/api/comments/:subreddit/:article",{sort:"confidence"})}]),rpResourceServices.factory("rpMoreChildrenResourceService",["$resource",function(e){return e("/api/morechildren",{sort:"confidence"})}]),rpResourceServices.factory("rpMessageResourceService",["$resource",function(e){return e("/api/uauth/message/:where",{after:"none"})}]),rpResourceServices.factory("rpGildResourceService",["$resource",function(e){return e("/api/uauth/gild")}]),rpResourceServices.factory("rpVoteResourceService",["$resource",function(e){return e("/api/uauth/vote/")}]),rpResourceServices.factory("rpDeleteResourceService",["$resource",function(e){return e("/api/uauth/del/")}]),rpResourceServices.factory("rpEditResourceService",["$resource",function(e){return e("/api/uauth/editusertext")}]),rpResourceServices.factory("rpSaveResourceService",["$resource",function(e){return e("/api/uauth/save/")}]),rpResourceServices.factory("rpUnsaveResourceService",["$resource",function(e){return e("/api/uauth/unsave/")}]),rpResourceServices.factory("rpCommentResourceService",["$resource",function(e){return e("/api/uauth/comment")}]),rpResourceServices.factory("rpMessageComposeResourceService",["$resource",function(e){return e("/api/uauth/compose")}]),rpResourceServices.factory("rpSubmitResourceService",["$resource",function(e){return e("/api/uauth/submit")}]),rpResourceServices.factory("rpNeedsCaptchaResourceService",["$resource",function(e){return e("/api/uauth/needs_captcha")}]),rpResourceServices.factory("rpNewCaptchaResourceService",["$resource",function(e){return e("/api/uauth/new_captcha")}]),rpResourceServices.factory("rpCaptchaResourceService",["$resource",function(e){return e("/api/uauth/captcha/:iden")}]),rpResourceServices.factory("rpSearchResourceService",["$resource",function(e){return e("/api/search/:sub",{sub:"all",sort:"relevance",after:"",before:"",restrict_sr:!0,t:"all",type:"sr",limit:24})}]),rpResourceServices.factory("rpSettingsResourceService",["$resource",function(e){return e("/settings")}]),rpResourceServices.factory("rpShareEmailResourceService",["$resource",function(e){return e("/share")}]),rpResourceServices.factory("rpImgurAlbumResourceService",["$resource",function(e){return e("https://api.imgur.com/3/album/:id",{},{get:{headers:{Authorization:"Client-ID a912803498adcd4"}}})}]),rpResourceServices.factory("rpImgurGalleryResourceService",["$resource",function(e){return e(" https://api.imgur.com/3/gallery/:id",{},{get:{headers:{Authorization:"Client-ID a912803498adcd4"}}})}]),rpResourceServices.factory("rpTweetResourceService",["$resource",function(e){return e("/twitter/status/:id")}]),rpResourceServices.factory("rpGoogleUrlResourceService",["$resource",function(e){return e("https://www.googleapis.com/urlshortener/v1/url",{key:"AIzaSyCie8StCg7EAAOECOjLa3qEMocvi7YhQfU"})}]);var rpSaveControllers=angular.module("rpSaveControllers",[]);rpSaveControllers.controller("rpSaveButtonCtrl",["$scope","rpSaveUtilService","rpAuthUtilService","rpToastUtilService",function(e,t,r,i){e.save=function(){r.isAuthenticated?(e.saved=!e.saved,t(e.redditId,e.saved,function(e,t){})):i("You've got to log in to save posts")}}]);var rpScoreControllers=angular.module("rpScoreControllers",[]);rpScoreControllers.controller("rpScoreCtrl",["$scope","rpAuthUtilService","rpToastUtilService","rpVoteUtilService",function(e,t,r,i){e.upvote=function(){if(t.isAuthenticated){var o,n=e.score,s=e.likes;switch(e.likes){case!0:o=0,e.score=e.score-1,e.likes=null;break;case!1:o=1,e.score=e.score+2,e.likes=!0;break;default:o=1,e.score=e.score+1,e.likes=!0}i(e.redditId,o,function(t,i){t&&(e.score=n,e.likes=s,r("Something went wrong trying to upvotes."))})}else r("You must log in to vote")},e.downvote=function(){if(t.isAuthenticated){var o,n=e.score,s=e.likes;switch(e.likes){case!0:o=-1,e.score=e.score-2,e.likes=!1;break;case!1:o=0,e.score=e.score+1,e.likes=null;break;default:o=-1,e.score=e.score-1,e.likes=!1}i(e.redditId,o,function(t,i){t&&(r("Something went wrong tring to downvote."),e.score=n,e.lieks=s)})}else r("You must log in to vote")}}]);var rpSearchControllers=angular.module("rpSearchControllers",[]);rpSearchControllers.controller("rpSearchSidenavCtrl",["$scope","$rootScope",function(e,t){e.isOpen=!1,e.toggleOpen=function(){e.isOpen=!e.isOpen};var r=t.$on("search_form_visibility",function(t,r){e.isOpen=r});e.$on("$destroy",function(){r()})}]),rpSearchControllers.controller("rpSearchFormCtrl",["$scope","$rootScope","$location","$routeParams","$timeout","rpSearchUtilService","rpSubredditsUtilService","rpLocationUtilService",function(e,t,r,i,o,n,s,a){function l(){e.searchSubreddits&&e.searchLinks?e.params.type="sr, link":e.searchSubreddits?e.params.type="sr":e.searchLinks&&(e.params.type="link")}function c(e){var t=angular.lowercase(e);return function(e){return 0===e.data.display_name.indexOf(t)}}e.params=n.params,s.currentSub&&""!==s.currentSub?e.params.sub=s.currentSub:e.params.sub="all","all"!==e.params.sub&&(e.params.type=e.params.formType="link");
var p=/\/search.*/,u=p.test(r.path());e.focusInput=!0,e.searchSubreddits="sr"===e.params.type||"sr, link"===e.params.type,e.searchLinks="link"===e.params.type||"sr, link"===e.params.type,e.toggleSearchSubreddits=function(){e.searchSubreddits=!e.searchSubreddits,e.searchLinks||(e.searchLinks=!0),l()},e.toggleSearchLinks=function(){e.searchLinks=!e.searchLinks,e.searchSubreddits||(e.searchSubreddits=!0),l()},e.subSearch=function(){e.subs=s.subs;var t=e.params.sub?e.subs.filter(c(e.params.sub)):[];return t};var d=t.$on("search_params_changed",function(){e.params=n.params});e.submitSearchForm=function(){u=p.test(r.path()),e.subSelectedItem&&(e.params.sub=e.subSelectedItem.data.display_name),""===e.params.sub&&(s.currentSub&&""!==s.currentSub?e.params.sub=s.currentSub:e.params.sub="all"),e.params.sub&&""!==e.params.sub||(e.params.sub="all"),"all"!==e.params.sub&&"link"!==e.params.type&&(e.params.type="link"),"all"===e.params.sub?e.params.restrict_sr=!1:e.params.restrict_sr=!0,e.params.after="",l(),o(function(){a(null,"/search","q="+e.params.q+"&sub="+e.params.sub+"&type="+e.params.type+"&restrict_sr="+e.params.restrict_sr+"&sort="+e.params.sort+"&after="+e.params.after+"&t="+e.params.t,!u,!1),u&&t.$emit("search_form_submitted")},250)},e.resetSearchForm=function(){},e.$on("$destroy",function(){d()})}]),rpSearchControllers.controller("rpSearchCtrl",["$scope","$rootScope","$routeParams","$location","$window","$timeout","$mdDialog","$mdBottomSheet","rpSubredditsUtilService","rpSearchUtilService","rpSearchFormUtilService","rpUserFilterButtonUtilService","rpUserSortButtonUtilService","rpPostFilterButtonUtilService","rpSubscribeButtonUtilService","rpSearchFilterButtonUtilService","rpLocationUtilService","rpSettingsUtilService","rpToolbarShadowUtilService","rpTitleChangeService","rpAuthUtilService","rpIdentityUtilService",function(e,t,r,i,o,n,s,a,l,c,p,u,d,m,h,g,f,v,b,S,$,w){function C(){if("link"===e.params.type){t.$emit("rp_tabs_changed",R),t.$emit("rp_tabs_show"),e.scroll=!0;for(var r=0;r<R.length;r++)if(e.params.sort===R[r].value){t.$emit("rp_tabs_selected_index_changed",r);break}}else t.$emit("rp_tabs_hide"),e.scroll=!1}function y(t){var r=t.shift();r.column=U(),e.posts.push(r),n(function(){t.length>0&&y(t)},50)}function U(){var e,t,r=angular.element(".rp-col-wrapper");return r.each(function(r){var i=jQuery(this).height();(angular.isUndefined(e)||t>i)&&(t=i,e=r)}),e}u.hide(),d.hide(),m.hide(),h.hide(),g.hide(),e.posts=[],e.links=[],e.subs=[],e.haveSubs=e.haveLinks=e.havePosts=!1;var _=!1;e.nothingPosts=!1,e.nothingSubs=!1,e.nothingLinks=!1,e.noMorePosts=!1,e.params=c.params,$.isAuthenticated&&w.getIdentity(function(t){e.identity=t}),e.showSub=!0,r.q&&(e.params.q=r.q,S.prepTitleChange("search: "+e.params.q)),r.sub?e.params.sub=r.sub:l.currentSub&&(e.params.sub=l.currentSub),"all"===e.params.sub||""===e.params.sub?(r.type&&(e.params.type=r.type),e.type=e.params.formType=e.params.type):e.type=e.params.formType=e.params.type="link";var k=/[.]*(author\:)[,]*/;k.test(e.params.q)&&(e.type=e.params.type="link"),"link"!==e.params.type&&b.show(),r.restrict_sr&&(e.params.restrict_sr=r.restrict_sr),r.t&&(e.params.t=r.t),r.sort&&(e.params.sort=r.sort),r.after?e.params.after=r.after:e.params.after="",r.limit&&(e.params.limit=r.limit),p.show();var R=[{label:"relevance",value:"relevance"},{label:"top",value:"top"},{label:"new",value:"new"},{label:"comments",value:"comments"}];C(),t.$emit("progressLoading"),"sr, link"===e.params.type?(g.hide(),e.params.type="sr",e.params.limit=4,c.search(function(r,i){r||(i&&i.data.children.length>0?(e.noMorePosts=i.data.children.length<e.params.limit,e.subs=i.data.children,e.haveSubs=!0):e.nothingSubs=!0,(e.haveLinks||e.nothingLinks)&&(t.$emit("progressComplete"),e.params.limit=8,e.params.type="sr, link"))}),e.params.type="link",e.params.limit=4,c.search(function(r,i){r||(i&&i.data.children.length>0?(e.noMorePosts=i.data.children.length<e.params.limit,e.links=i.data.children,e.haveLinks=!0):e.nothingLinks=!0,(e.haveSubs||e.nothingSubs)&&(t.$emit("progressComplete"),e.params.limit=8,e.params.type="sr, link"))}),e.params.type="sr, link"):("link"===e.params.type&&"top"===e.params.sort&&g.show(),c.search(function(r,i){t.$emit("progressComplete"),r||(i&&i.data.children.length>0?(e.noMorePosts=i.data.children.length<e.params.limit,i.data.children.length>0&&y(i.data.children),e.havePosts=!0):e.nothingPosts=!0)})),e.thisController=this,this.completeDeleting=function(t){var r;"link"===e.params.type?r=e.posts:"sr, link"===e.params.type&&(r=e.links),r.forEach(function(e,i){e.data.name===t&&r.splice(i,1)})};var A=t.$on("rp_tab_click",function(r,i){e.params.sort=i,e.params.after="","top"===e.params.sort&&g.show(),f(null,"/search","q="+e.params.q+"&sub="+e.params.sub+"&type="+e.params.type+"&restrict_sr="+e.params.restrict_sr+"&sort="+e.params.sort+"&after="+e.params.after+"&t="+e.params.t,!1,!0),e.posts=[],e.havePosts=!1,e.noMorePosts=!1,t.$emit("progressLoading"),c.search(function(r,i){r||(e.noMorePosts=i.data.children.length<e.params.limit,i.data.children.length>0&&y(i.data.children),t.$emit("progressComplete"),e.havePosts=!0)})});e.morePosts=function(){if(e.posts&&e.posts.length>0){var r=e.posts[e.posts.length-1].data.name;r&&!_&&(_=!0,e.params.after=r,f(null,"/search","q="+e.params.q+"&sub="+e.params.sub+"&type="+e.params.type+"&restrict_sr="+e.params.restrict_sr+"&sort="+e.params.sort+"&after="+e.params.after+"&limit="+e.params.limit+"&t="+e.params.t,!1,!0),t.$emit("progressLoading"),c.search(function(r,i){r||(e.noMorePosts=i.data.children.length<e.params.limit,t.$emit("progressComplete"),i.data.children.length>0&&y(i.data.children),e.havePosts=!0,_=!1)}))}},e.searchSub=function(r,i){r.ctrlKey?f(r,"/search","q="+e.params.q+"&sub="+i.data.display_name+"&type=link&restrict_sr=true&sort=relevance&after=&t=all",!0,!0):(e.params.sub=i.data.display_name,e.type=e.params.formType=e.params.type="link",e.params.restrict_sr=!0,e.params.after="",e.params.sort="relevance",e.params.t="all",C(),f(null,"/search","q="+e.params.q+"&sub="+e.params.sub+"&type="+e.params.type+"&restrict_sr="+e.params.restrict_sr+"&sort="+e.params.sort+"&after="+e.params.after+"&t="+e.params.t,!1,!1),e.posts=[],e.havePosts=!1,e.nothingPosts=!1,e.nothingSubs=!1,e.nothingLinks=!1,e.noMorePosts=!1,t.$emit("progressLoading"),b.hide(),c.search(function(r,i){r||(e.noMorePosts=i.data.children.length<e.params.limit,t.$emit("progressComplete"),i.data.children.length>0&&y(i.data.children),e.havePosts=!0)}))},e.moreSubs=function(r){C(),r.ctrlKey?f(r,"/search","q="+e.params.q+"&sub=all&type=sr&restrict_sr=false&sort=relevance&after=&t=all",!0,!0):(e.params.sub="all",e.type=e.params.formType=e.params.type="sr",e.params.restrict_sr=!1,e.params.after="",e.params.sort="relevance",e.params.t="all",f(null,"/search","q="+e.params.q+"&sub="+e.params.sub+"&type="+e.params.type+"&restrict_sr="+e.params.restrict_sr+"&sort="+e.params.sort+"&after="+e.params.after+"&t="+e.params.t,!1,!1),e.posts=[],e.subs=[],e.links=[],e.havePosts=!1,e.haveLinks=!1,e.haveSubs=!1,e.noMorePosts=!1,t.$emit("progressLoading"),c.search(function(r,i){r||(e.noMorePosts=i.data.children.length<e.params.limit,t.$emit("progressComplete"),i.data.children.length>0&&y(i.data.children),e.havePosts=!0)}))},e.moreLinks=function(r){r.ctrlKey?f(r,"/search","q="+e.params.q+"&sub=all&type=link&restrict_sr=false&sort=relevance&after=&t=all",!0,!0):(e.params.sub="all",e.type=e.params.formType=e.params.type="link",e.params.restrict_sr=!1,e.params.after="",e.params.sort="relevance",e.params.t="all",C(),f(null,"/search","q="+e.params.q+"&sub="+e.params.sub+"&type="+e.params.type+"&restrict_sr="+e.params.restrict_sr+"&sort="+e.params.sort+"&after="+e.params.after+"&t="+e.params.t,!1,!1),e.posts=[],e.subs=[],e.links=[],e.havePosts=!1,e.haveLinks=!1,e.haveSubs=!1,e.noMorePosts=!1,t.$emit("progressLoading"),b.hide(),c.search(function(r,i){r||(e.noMorePosts=i.data.children.length<e.params.limit,t.$emit("progressComplete"),i.data.children.length>0&&y(i.data.children),e.havePosts=!0)}))},e.sharePost=function(e,t){t.bottomSheet=!0;a.show({templateUrl:"partials/rpShareBottomSheet",controller:"rpShareCtrl",targetEvent:e,parent:".rp-view",disbaleParentScroll:!0,locals:{post:t}}).then(function(){t.bottomSheet=!1})["catch"](function(){t.bottomSheet=!1})};var T=t.$on("search_time_click",function(r,i){e.posts=[],e.havePosts=!1,e.noMorePosts=!1,e.params.t=i,e.params.after="",f(null,"/search","q="+e.params.q+"&sub="+e.params.sub+"&type="+e.params.type+"&restrict_sr="+e.params.restrict_sr+"&sort="+e.params.sort+"&after="+e.params.after+"&t="+e.params.t,!1,!0),e.havePosts=!1,t.$emit("progressLoading"),c.search(function(r,i){r||(e.noMorePosts=i.data.children.length<e.params.limit,t.$emit("progressComplete"),i.data.children.length>0&&y(i.data.children),e.havePosts=!0)})}),M=t.$on("search_form_submitted",function(){e.posts=[],e.havePosts=!1,e.nothingPosts=!1,e.nothingSubs=!1,e.nothingLinks=!1,e.noMorePosts=!1,t.$emit("progressLoading");var r=/[.]*(author\:)[,]*/;r.test(e.params.q)&&(e.type=e.params.type="link"),e.type=e.params.type,"link"!==e.params.type?b.show():b.hide(),C(),"sr, link"===e.params.type?(g.hide(),e.subs=[],e.haveSubs=!1,e.params.type="sr",e.params.limit=4,c.search(function(r,i){r||(i&&i.data.children.length>0?(e.subs=i.data.children,e.haveSubs=!0):e.nothingSubs=!0,(e.haveLinks||e.nothingLinks)&&(t.$emit("progressComplete"),e.params.limit=24,e.params.type="sr, link"))}),e.links=[],e.haveLinks=!1,e.params.type="link",e.params.limit=4,c.search(function(r,i){r||(i&&i.data.children.length>0?(e.links=i.data.children,e.haveLinks=!0):e.nothingLinks=!0,(e.haveSubs||e.nothingSubs)&&(t.$emit("progressComplete"),e.params.limit=24,e.params.type="sr, link"))})):c.search(function(r,i){r||(t.$emit("progressComplete"),i&&i.data.children.length>0?(e.noMorePosts=i.data.children.length<e.params.limit,i.data.children.length>0&&y(i.data.children),e.havePosts=!0,e.type=e.params.type):e.nothingPosts=!0)})}),D=t.$on("rp_window_resize",function(t,r){if(!angular.isUndefined(e.posts))for(var i=0;i<e.posts.length;i++)e.posts[i].column=i%r});e.$on("$destroy",function(){M(),T(),A(),D()})}]),rpSearchControllers.controller("rpSearchTimeFilterCtrl",["$scope","$rootScope","rpSearchUtilService",function(e,t,r){e.type=r.params.type,e.selectTime=function(e){t.$emit("search_time_click",e)}}]),rpSearchControllers.controller("rpSearchSubscriptionCtrl",["$scope","$rootScope","rpSubredditsUtilService",function(e,t,r){e.loadingSubscription=!1,e.subscribed=r.isSubscribed(e.post.data.display_name),e.toggleSubscription=function(){e.loadingSubscription=!0;var t=e.subscribed?"unsub":"sub";r.subscribe(t,e.post.data.name,function(t,r){t||(e.loadingSubscription=!1)})};var i=t.$on("subreddits_updated",function(){e.subscribed=r.isSubscribed(e.post.data.display_name)});e.$on("$destroy",function(){i()})}]);var rpServices=angular.module("rpServices",[]);rpServices.factory("rpTitleChangeService",["$rootScope",function(e){var t={};return t.title="frontpage",t.prepTitleChange=function(r){t.title=r,e.$broadcast("handleTitleChange")},t}]);var rpSettingsControllers=angular.module("rpSettingsControllers",[]);rpSettingsControllers.controller("rpSettingsDialogCtrl",["$scope","$rootScope","$location","$mdDialog","rpSettingsUtilService",function(e,t,r,i,o){e.isDialog=!0;var n=e.$on("$locationChangeSuccess",function(){i.hide()});e.$on("$destroy",function(){n()})}]),rpSettingsControllers.controller("rpSettingsCtrl",["$scope","$rootScope","rpSettingsUtilService","rpTitleChangeService",function(e,t,r,i){e.settings=r.getSettings(),e.themes=[{name:"orange",value:"default"},{name:"blue",value:"blue"},{name:"indigo",value:"indigo"},{name:"green",value:"green"},{name:"red",value:"red"},{name:"pink",value:"pink"},{name:"purple",value:"purple"}],e.isDialog||i.prepTitleChange("Settings"),e.settingChanged=function(){r.setSettings(e.settings)};var o=t.$on("settings_changed",function(){e.settings=r.getSettings()});e.$on("$destroy",function(){o()})}]),rpSettingsControllers.controller("rpSettingsSidenavCtrl",["$scope","$rootScope","$mdDialog","rpSettingsUtilService","rpLocationUtilService",function(e,t,r,i,o){e.showSettings=function(e){i.settings.settingsDialog?r.show({controller:"rpSettingsDialogCtrl",templateUrl:"partials/rpSettingsDialog",targetEvent:e,clickOutsideToClose:!0,escapeToClose:!0}):o(null,"/settings","",!0,!1)},e.$on("$destroy",function(){})}]);var rpShareControllers=angular.module("rpShareControllers",[]);rpShareControllers.controller("rpShareButtonCtrl",["$scope","$rootScope","$mdBottomSheet",function(e,t,r){e.share=function(t){r.show({templateUrl:"partials/rpShareBottomSheet",controller:"rpShareCtrl",targetEvent:t,parent:"#article-bottom-sheet-parent",disbaleParentScroll:!0,locals:{post:e.post}}).then(function(){},function(){})["catch"](function(){})}}]),rpShareControllers.controller("rpShareCtrl",["$scope","$window","$filter","$mdBottomSheet","$mdDialog","rpLocationUtilService","rpSettingsUtilService","rpGoogleUrlUtilService","post",function(e,t,r,i,o,n,s,a,l){var c=l?"http://www.reddup.com"+l.data.permalink:"http://www.reddup.com",p=l?l.data.title:"reddup.com",u="http://reddup.co/logo";l&&""!==l.data.thumbnail&&"self"!==l.data.thumbnail&&(u=l.data.thumbnail),e.items=[{name:"reddit user",icon:"/icons/reddit-square.svg"},{name:"email",icon:"/icons/ic_email_black_48px.svg"},{name:"facebook",icon:"/icons/facebook-box.svg"},{name:"twitter",icon:"/icons/twitter-box.svg"}],e.listItemClicked=function(e,r){switch(i.hide(),r){case 0:o.show({controller:"rpMessageComposeDialogCtrl",templateUrl:"partials/rpMessageComposeDialog",clickOutsideToClose:!1,escapeToClose:!1,targetEvent:e,locals:{shareLink:c,shareTitle:p}});break;case 1:o.show({controller:"rpShareEmailDialogCtrl",templateUrl:"partials/rpShareEmailDialog",clickOutsideToClose:!1,escapeToClose:!1,targetEvent:e,locals:{shareLink:c,shareTitle:p}});break;case 2:var n="https://www.facebook.com/dialog/feed?app_id=868953203169873&name=";n+=encodeURIComponent(p),n+="&link=",n+=encodeURIComponent(c),n+="&redirect_uri=",n+=encodeURIComponent("http://reddup.co/facebookComplete"),n+="&picture=",n+=u,n+="&display=popup",t.open(n,"Share with facebook","height=500,width=500");break;case 3:var s;p.length+c.length<127?(s=p+", "+c+" via @reddup",t.open("https://twitter.com/intent/tweet?text="+encodeURIComponent(s)+" via @reddup","Share with twitter","height=500,width=500")):a(c,function(e,r){if(e);else{if(p.length+r.id.length<123)s=p+", "+r.id+" via @reddup";else{var i=p.substr(0,123-r.id.length);s=i+".. "+r.id+" via @reddup"}t.open("https://twitter.com/intent/tweet?text="+encodeURIComponent(s),"Share with twitter","height=500,width=500")}})}}}]),rpShareControllers.controller("rpShareEmailDialogCtrl",["$scope","$location","$mdDialog","shareLink","shareTitle",function(e,t,r,i,o){e.shareLink=i,e.shareTitle=o;var n=e.$on("$locationChangeSuccess",function(){r.hide()});e.$on("$destroy",function(){n()})}]),rpShareControllers.controller("rpShareEmailCtrl",["$scope",function(e){}]),rpShareControllers.controller("rpShareEmailFormCtrl",["$scope","$mdDialog","rpShareEmailUtilService",function(e,t,r){function i(){e.to="",e.text="Check this out, ["+e.shareTitle+"]("+e.shareLink+")",e.showAnother=!1,e.showButtons=!0,e.showSubmit=!0,angular.element("#share-to").focus()}i(),e.submitForm=function(){e.showProgress=!0,e.showButtons=!1;var t="reddup shared link: "+e.shareTitle;r(e.to,e.text,t,function(t,r){t||(e.feedbackMessage="Email sent :).",e.showProgress=!1,e.showAnother=!0,e.showSubmit=!1,e.showButtons=!0)})},e.resetForm=function(){i()},e.closeDialog=function(){t.hide()}}]);var rpSubmitControllers=angular.module("rpSubmitControllers",[]);rpSubmitControllers.controller("rpSubmitDialogCtrl",["$scope","$location","$mdDialog","subreddit",function(e,t,r,i){e.isDialog=!0,i&&"all"===i||(e.subreddit=i);var o=e.$on("$locationChangeSuccess",function(){r.hide()});e.$on("$destroy",function(){o()})}]),rpSubmitControllers.controller("rpSubmitFormCtrl",["$scope","$rootScope","$interval","$mdDialog","rpSubmitUtilService","rpSubredditsUtilService","rpSidebarButtonUtilService","rpLocationUtilService",function(e,t,r,i,o,n,s,a){function l(e){var t=angular.lowercase(e);return function(e){return 0===e.data.display_name.indexOf(t)}}function c(){e.title="",e.url="",e.text="",e.sendreplies=!0,e.iden="",e.cpatcha="",p&&(e.subreddit=""),e.showSubmit=!0,e.showRatelimit=!1,e.showAnother=!1,e.showRepost=!1,e.showMessage=!1,e.showButtons=!0,e.rpSubmitNewLinkForm&&e.rpSubmitNewLinkForm.$setUntouched()}e.subreddit||(e.subreddit=n.currentSub),!e.isDialog&&e.subreddit&&s.show();var p=!1;e.subreddit||(p=!0),c();var u;e.subs=n.subs,e.subSearch=function(t){u=t;var r=t?e.subs.filter(l(t)):[];return r},e.resetForm=function(){c(),t.$emit("reset_captcha")},e.submitLink=function(i){e.showProgress=!0,e.showButtons=!1,e.showFeedback=!1;var n=e.url?"link":"self";i.target.elements.submitTitleInput.blur(),i.target.elements.submitSubredditInput&&i.target.elements.submitSubredditInput.blur(),i.target.elements.submitUrlInput&&i.target.elements.submitUrlInput.blur(),i.target.elements.submitTextInput&&i.target.elements.submitTextInput.blur(),i.target.elements.captchaInput&&i.target.elements.captchaInput.blur(),e.subreddit||(e.subreddit=e.mdSelectedItem?e.mdSelectedItem.data.display_name:u),o(n,e.resubmit,e.sendreplies,e.subreddit,e.text,e.title,e.url,e.iden,e.captcha,function(i,o){if(e.showProgress=!1,i){var n=JSON.parse(i.body);if(n.json.errors.length>0)if("RATELIMIT"===n.json.errors[0][0]){e.showSubmit=!1,e.showRatelimit=!0;var s=n.json.ratelimit,a=r(function(){var i=parseInt(s/60,10),o=parseInt(s%60,10);i=10>i?"0"+i:i,o=10>o?"0"+o:o,e.rateLimitTimer=i+":"+o,--s<0&&(t.$emit("reset_captcha"),e.showRatelimit=!1,e.showFeedbackAlert=!1,e.feedbackMessage="Alright, you should be able to post now, give it another go.",e.showSubmit=!0,r.cancel(a))},1e3);e.feedbackMessage=n.json.errors[0][1],e.showFeedbackAlert=!0,e.showFeedbackLink=!1,e.showFeedback=!0,e.showButtons=!0}else"QUOTA_FILLED"===n.json.errors[0][0]?(e.feedbackMessage=n.json.errors[0][1],e.showFeedbackAlert=!0,e.showFeedbackLink=!1,e.showFeedback=!0,e.showSubmit=!1,e.showButtons=!0):"BAD_CAPTCHA"===n.json.errors[0][0]?(t.$emit("reset_captcha"),e.feedbackMessage="You entered the CAPTCHA incorrectly. Please try again.",e.showFeedbackAlert=!0,e.showFeedbackLink=!1,e.showFeedback=!0,e.showButtons=!0):"ALREADY_SUB"===n.json.errors[0][0]?(t.$emit("reset_captcha"),e.resubmit=!0,e.feedbackMessage=n.json.errors[0][1],e.showFeedbackAlert=!0,e.showFeedbackLink=!1,e.showFeedback=!0,e.showSubmit=!1,e.showRepost=!0,e.showButtons=!0):(t.$emit("reset_captcha"),e.feedbackMessage=n.json.errors[0][1],e.showFeedbackAlert=!0,e.showFeedbackLink=!1,e.showFeedback=!0,e.showSubmit=!0,e.showButtons=!0);else n.json.data.url||(t.$emit("reset_captcha"),e.feedbackMessage="An error occurred trying to post your link.\nPlease check the url, wait a few minutes and try again.",e.showFeedbackLink=!1,e.showFeedbackAlert=!0,e.showFeedback=!0,e.showButtons=!0)}else{var l=/^https?:\/\/www\.reddit\.com\/r\/([\w]+)\/comments\/([\w]+)\/(?:[\w]+)\//i,c=l.exec(o.json.data.url);c&&(e.feedbackLink="/r/"+c[1]+"/comments/"+c[2]),e.feedbackLinkName="Your post",e.feedbackMessage="was submitted successfully.",e.showFeedbackAlert=!1,e.showFeedbackLink=!0,e.showFeedback=!0,e.showRepost=!1,e.showSubmit=!1,e.showAnother=!0,e.showButtons=!0}})},e.closeDialog=function(){e.isDialog?i.hide():n.currentSub?a(null,"/r/"+n.currentSub,"",!0,!1):a(null,"/","",!0,!1)}}]);var rpTabsControllers=angular.module("rpTabsControllers",[]);rpTabsControllers.controller("rpTabsCtrl",["$scope","$timeout","$rootScope",function(e,t,r){e.tabs=[],e.selectedIndex=0,e.tabClick=function(e){t(function(){r.$emit("rp_tab_click",e)},350)};var i=r.$on("rp_tabs_changed",function(t,r){e.selectedIndex=0,e.tabs=r,e.showTabs=!0}),o=r.$on("rp_tabs_selected_index_changed",function(t,r){e.selectedIndex=r});e.$on("$destroy",function(){o(),i()})}]);var rpUserControllers=angular.module("rpUserControllers",[]);rpUserControllers.controller("rpUserCtrl",["$scope","$rootScope","$window","$routeParams","$timeout","rpUserUtilService","rpTitleChangeService","rpSettingsUtilService","rpUserFilterButtonUtilService","rpPostFilterButtonUtilService","rpSubscribeButtonUtilService","rpLocationUtilService","rpIdentityUtilService","rpSearchFormUtilService","rpSearchFilterButtonUtilService","rpToolbarShadowUtilService","rpAuthUtilService","rpSidebarButtonUtilService","rpUserSortButtonUtilService",function(e,t,r,i,o,n,s,a,l,c,p,u,d,m,h,g,f,v,b){function S(){e.posts=[],e.havePosts=!1,e.noMorePosts=!1,t.$emit("progressLoading"),n(k,R,A,"",T,U,function(r,i){t.$emit("progressComplete"),r||(i.get.data.children.length<U&&(e.noMorePosts=!0),i.get.data.children.length>0&&$(i.get.data.children),e.havePosts=!0)})}function $(t){for(var r=!1,i=0;i<e.posts.length;i++)if(e.posts[i].data.id===t[0].data.id){r=!0;break}var n=t.shift();r||(n.column=w(),e.posts.push(n)),o(function(){t.length>0&&$(t)},50)}function w(){var e,t,r=angular.element(".rp-col-wrapper");return r.each(function(r){var i=jQuery(this).height();(angular.isUndefined(e)||t>i)&&(t=i,e=r)}),e}var C=[{label:"overview",value:"overview"},{label:"submitted",value:"submitted"},{label:"comments",value:"comments"},{label:"gilded",value:"gilded"}];t.$emit("rp_tabs_changed",C),t.$emit("rp_tabs_show"),c.hide(),p.hide(),m.hide(),h.hide(),g.hide(),v.hide();var y=!1,U=22,_=8,k=i.username,R=i.where||"overview",A=i.sort||"new",T=i.t||"none";if("top"===A||"controversial"===A?l.show():l.hide(),s.prepTitleChange("u/"+k),e.commentsDialog=a.settings.commentsDialog,f.isAuthenticated)d.getIdentity(function(r){e.isMe=k===r.name,e.isMe?(C=C.concat([{label:"upvoted",value:"upvoted"},{label:"downvoted",value:"downvoted"},{label:"hidden",value:"hidden"},{label:"saved",value:"saved"}]),t.$emit("rp_tabs_changed",C),t.$emit("rp_tabs_show")):"upvoted"!==R&&"downvoted"!==R&&"hidden"!==R&&"saved"!==R||(R="overview",u(null,"/u/"+k+"/"+R,"",!1,!0));for(var i=0;i<C.length;i++)if(R===C[i].value){t.$emit("rp_tabs_selected_index_changed",i);break}S()});else{e.isMe=!1,"upvoted"!==R&&"downvoted"!==R&&"hidden"!==R&&"saved"!==R||(R="overview",u(null,"/u/"+k+"/"+R,"",!1,!0));for(var M=0;M<C.length;M++)if(R===C[M].value){t.$emit("rp_tabs_selected_index_changed",M);break}S()}var D=t.$on("settings_changed",function(t){e.commentsDialog=a.settings.commentsDialog}),P=t.$on("user_sort_click",function(e,t){A=t,u(null,"/u/"+k+"/"+R,"sort="+A,!1,!1),"top"===A||"controversial"===A?l.show():l.hide(),S()}),E=t.$on("user_t_click",function(e,t){T=t,u(null,"/u/"+k+"/"+R,"sort="+A+"&t="+T,!1,!1),S()}),L=t.$on("rp_tab_click",function(r,i){e.posts=[],e.noMorePosts=!1,R=i,u(null,"/u/"+k+"/"+R,"",!1,!1),e.havePosts=!1,t.$emit("progressLoading"),n(k,R,A,"",T,U,function(r,i){t.$emit("progressComplete"),r||(i.get.data.children.length<U&&(e.noMorePosts=!0),i.get.data.children.length>0&&$(i.get.data.children),e.havePosts=!0)}),"overview"===i||"submitted"===i||"comments"===i?b.show():b.hide()});e.thisController=this,this.completeDeleting=function(t){e.posts.forEach(function(r,i){r.data.name===t&&e.posts.splice(i,1)})},e.morePosts=function(){if(e.posts&&e.posts.length>0){var r=e.posts[e.posts.length-1].data.name;r&&!y&&(y=!0,t.$emit("progressLoading"),n(k,R,A,r,T,_,function(r,i){t.$emit("progressComplete"),r||(i.get.data.children.length<_&&(e.noMorePosts=!0),y=!1,i.get.data.children.length>0&&$(i.get.data.children))}))}};var I=t.$on("rp_window_resize",function(t,r){if(!angular.isUndefined(e.posts))for(var i=0;i<e.posts.length;i++)e.posts[i].column=i%r});e.$on("$destroy",function(){E(),P(),D(),L(),I(),t.$emit("rp_tabs_hide")})}]),rpUserControllers.controller("rpUserSortCtrl",["$scope","$rootScope","$routeParams","rpUserFilterButtonUtilService",function(e,t,r,i){var o=t.$on("$routeChangeSuccess",function(){e.userSort=r.sort||"new"});e.selectSort=function(e){"top"===e||"controversial"===e?i.show():i.hide(),t.$emit("user_sort_click",e)},e.$on("$destroy",function(){o()})}]),rpUserControllers.controller("rpUserTimeFilterCtrl",["$scope","$rootScope","$routeParams",function(e,t,r){var i=t.$on("$routeChangeSuccess",function(){e.userTime=r.t||"all"});e.selectTime=function(e){t.$emit("user_t_click",e)},e.$on("$destroy",function(){i()})}]);var rpUtilServices=angular.module("rpUtilServices",[]);rpUtilServices.factory("rpGoogleUrlUtilService",["rpGoogleUrlResourceService",function(e){return function(t,r){e.save({longUrl:t},function(e){typeof e===Error?r(e,null):r(null,e)})}}]),rpUtilServices.factory("rpSearchUtilService",["$rootScope","rpLocationUtilService","rpToastUtilService","rpRedditApiService",function(e,t,r,i){var o={};return o.params={q:"",sub:"all",type:"sr, link",sort:"relevance",t:"all",after:"",limit:8},o.search=function(e){o.params.q?i.redditRequest("get","/r/$sub/search",{$sub:o.params.sub,q:o.params.q,limit:o.params.limit,after:o.params.after,before:"",restrict_sr:o.params.restrict_sub,sort:o.params.sort,t:o.params.t,type:o.params.type},function(t){t.responseError?(r("Something went wrong with your search request :/"),e(t,null)):e(null,t)}):e(null,null)},o}]),rpUtilServices.factory("rpLocationUtilService",["$location","$window",function(e,t){return function(r,i,o,n,s){null!==r&&r.ctrlKey?(i=o?i+"?"+o:i,t.open(i)):(e.search(o),e.path(i,n),s&&e.replace())}}]),rpUtilServices.factory("rpSettingsUtilService",["$rootScope","rpSettingsResourceService","rpToastUtilService",function(e,t,r){var i={};return i.settings={over18:!0,composeDialog:!0,commentsDialog:!0,submitDialog:!0,settingsDialog:!0,theme:"default"},i.getSettings=function(){return i.settings},i.setSettings=function(e){i.settings=e,i.saveSettings()},i.retrieveSettings=function(){t.get(function(t){if(t.loadDefaults!==!0)for(var r in t)i.settings[r]=t[r];e.$emit("settings_changed")})},i.saveSettings=function(){t.save(i.settings,function(e){}),r("Setting Saved :)!"),e.$emit("settings_changed")},e.$on("authenticated",function(){i.retrieveSettings()}),i}]),rpUtilServices.factory("rpSearchFormUtilService",["$rootScope",function(e){var t={};return t.isVisible=!1,t.show=function(){t.isVisible=!0,e.$emit("search_form_visibility",!0)},t.hide=function(){t.isVisible=!1,e.$emit("search_form_visibility",!1)},t}]),rpUtilServices.factory("rpSubscribeButtonUtilService",["$rootScope","rpSubredditsUtilService",function(e,t){var r={};return r.isVisible=!1,r.show=function(){r.isVisible=!0,e.$emit("subscribe_visibility")},r.hide=function(){r.isVisible=!1,t.resetSubreddit(),e.$emit("subscribe_visibility")},r}]),rpUtilServices.factory("rpUserSortButtonUtilService",["$rootScope",function(e){var t={};return t.isVisible=!1,t.show=function(){t.isVisible=!0,e.$emit("user_sort_button_visibility")},t.hide=function(){t.isVisible=!1,e.$emit("user_sort_button_visibility")},t}]),rpUtilServices.factory("rpSidebarButtonUtilService",["$rootScope",function(e){var t={};return t.isVisible=!1,t.show=function(){t.isVisible=!0,e.$emit("rules_button_visibility")},t.hide=function(){t.isVisible=!1,e.$emit("rules_button_visibility")},t}]),rpUtilServices.factory("rpUserFilterButtonUtilService",["$rootScope",function(e){var t={};return t.isVisible=!1,t.show=function(){t.isVisible=!0,e.$emit("user_filter_button_visibility")},t.hide=function(){t.isVisible=!1,e.$emit("user_filter_button_visibility")},t}]),rpUtilServices.factory("rpPostFilterButtonUtilService",["$rootScope",function(e){var t={};return t.isVisible=!1,t.show=function(){t.isVisible=!0,e.$emit("post_filter_button_visibility")},t.hide=function(){t.isVisible=!1,e.$emit("post_filter_button_visibility")},t}]),rpUtilServices.factory("rpSearchFilterButtonUtilService",["$rootScope",function(e){var t={};return t.isVisible=!1,t.show=function(){t.isVisible=!0,e.$emit("search_filter_button_visibility")},t.hide=function(){t.isVisible=!1,e.$emit("search_filter_button_visibility")},t}]),rpUtilServices.factory("rpIdentityUtilService",["rpAuthUtilService","rpRedditApiService",function(e,t){var r={},i=[],o=!1;return r.identity=null,r.reloadIdentity=function(e){r.identity=null,r.getIdentity(e)},r.getIdentity=function(n){e.isAuthenticated?null!==r.identity?n(r.identity):(i.push(n),o===!1&&(o=!0,t.redditRequest("get","/api/v1/me",{},function(e){r.identity=e,o=!1;for(var t=0;t<i.length;t++)i[t](r.identity);i=[]}))):n(null)},r}]),rpUtilServices.factory("rpAuthUtilService",["$rootScope","rpSettingsUtilService",function(e,t){var r={};return r.isAuthenticated=!1,r.setIdentity=function(e){r.identity=e},r.setAuthenticated=function(t){r.isAuthenticated=t,e.$emit("authenticated")},r}]),rpUtilServices.factory("rpToastUtilService",["$mdToast",function(e){return function(t){e.show({locals:{toastMessage:t},controller:"rpToastCtrl",templateUrl:"partials/rpToast",hideDelay:2500,position:"top left"})}}]),rpUtilServices.factory("rpGildUtilService",["rpToastUtilService","rpRedditApiService",function(e,t){return function(r,i){t.redditRequest("post","/api/v1/gold/gild/$fullname",{$fullname:r},function(t){if(t.responseError){var r=JSON.parse(t.body);e("INSUFFICIENT_CREDDITS"===r.reason?"You aint got no creddits in your reddit account :/":"Something went wrong trying to gild this post :/"),i(t,null)}else e("gilded post is gilded :)"),i(null,t)})}}]),rpUtilServices.factory("rpEditUtilService",["rpToastUtilService","rpRedditApiService",function(e,t){return function(r,i,o){t.redditRequest("post","/api/editusertext",{text:r,thing_id:i},function(t){t.responseError?(e("Something went wrong trying to edit your post :/"),o(t,null)):(e("Post Editted"),o(null,t))})}}]),rpUtilServices.factory("rpDeleteUtilService",["rpAuthUtilService","rpToastUtilService","rpRedditApiService",function(e,t,r){return function(e,i){r.redditRequest("post","/api/del",{id:e},function(e){e.responseError?(t("Something went wrong trying to delete your post :/"),i(e,null)):(t("Post deleted"),i(null,e))})}}]),rpUtilServices.factory("rpSaveUtilService",["rpRedditApiService",function(e){return function(t,r,i){var o=r?"/api/save":"/api/unsave";e.redditRequest("post",o,{id:t},function(e){e.responseError?i(e,null):i(null,e)})}}]),rpUtilServices.factory("rpVoteUtilService",["rpAuthUtilService","rpToastUtilService","rpRedditApiService",function(e,t,r){return function(e,t,i){r.redditRequest("post","/api/vote",{id:e,dir:t},function(e){e.responseError?i(e,null):i(null,e)})}}]),rpUtilServices.factory("rpCommentUtilService",["rpAuthUtilService","rpRedditApiService","rpToastUtilService",function(e,t,r){var i=!1;return function(o,n,s){e.isAuthenticated?n&&!i&&(i=!0,t.redditRequest("post","/api/comment",{parent:o,text:n},function(e){if(i=!1,e.responseError){var t="Something went wrong trying to post you comment :/";if(e.body){var o=JSON.parse(e.body);"TOO_OLD"===o.json.errors[0][0]&&(t=o.json.errors[0][1])}r(t),s(e,null)}else r("Comment Posted :)"),s(null,e)})):r("You've got to log in to post comments")}}]),rpUtilServices.factory("rpMessageComposeUtilService",["rpAuthUtilService","rpRedditApiService","rpToastUtilService",function(e,t,r){return function(i,o,n,s,a,l){e.isAuthenticated?t.redditRequest("post","/api/compose",{subject:i,text:o,to:n,iden:s,captcha:a},function(e){e.responseError?(r("Something went wrong trying to send your message :/"),l(e,null)):l(null,e)}):r("You've got to log in send messages.")}}]),rpUtilServices.factory("rpSubmitUtilService",["rpAuthUtilService","rpRedditApiService","rpToastUtilService",function(e,t,r){return function(i,o,n,s,a,l,c,p,u,d){e.isAuthenticated?t.redditRequest("post","/api/submit",{kind:i,sendreplies:n,sr:s,text:a,title:l,url:c,resubmit:o,iden:p,captcha:u},function(e){e.responseError?d(e,null):d(null,e)}):r("You've got to log in to submit links.")}}]),rpUtilServices.factory("rpShareEmailUtilService",["rpShareEmailResourceService","rpToastUtilService",function(e,t){return function(r,i,o,n){e.save({to:r,text:i,subject:o},function(e){e.responseError?(t("Something went wrong trying to send your email :/"),n(e,null)):(t("Email Sent :)"),n(null,e))})}}]),rpUtilServices.factory("rpCaptchaUtilService",["rpAuthUtilService","rpToastUtilService","rpRedditApiService",function(e,t,r){
var i={};return i.needsCaptcha=function(e){r.redditRequest("get","/api/needs_captcha",{},function(t){t.responseError?e(t,null):e(null,t)})},i.newCaptcha=function(e){r.redditRequest("post","/api/new_captcha",{},function(t){t.responseError?e(t,null):e(null,t)})},i}]),rpUtilServices.factory("rpSubredditsUtilService",["$rootScope","rpAuthUtilService","rpToastUtilService","rpRedditApiService",function(e,t,r,i){function o(t){i.redditRequest("listing","/subreddits/mine/$where",{$where:"subscriber",limit:u,after:""},function(i){i.responseError?(r("Something went wrong updating your subreddits."),t(i,null)):i.get.data.children.length>0?(p.subs=i.get.data.children,i.get.data.children.length<u?(e.$emit("subreddits_updated"),l(),t(null,i)):n(i.get.data.children[i.get.data.children.length-1].data.name,t)):s(t)})}function n(t,o){i.redditRequest("listing","/subreddits/mine/$where",{$where:"subscriber",after:t,limit:u},function(t){t.responseError?(r("Something went wrong updating your subreddits."),o(t,null)):(p.subs=p.subs.concat(t.get.data.children),t.get.data.children.length<u?(e.$emit("subreddits_updated"),l(),o(null,t)):n(t.get.data.children[t.get.data.children.length-1].data.name,o))})}function s(t){i.redditRequest("listing","/subreddits/$where",{$where:"default",limit:u},function(i){i.responseError?(r("Something went wrong updating your subreddits."),t(i,null)):(p.subs=i.get.data.children,e.$emit("subreddits_updated"),l(),t(null,i))})}function a(e){if("undefined"==typeof e&&(e=p.currentSub),p.subs.length>0&&""!==e){for(var t=0;t<p.subs.length;t++)if(p.subs[t].data.display_name.toLowerCase()===e.toLowerCase())return!0;return!1}return null}function l(){var t=p.subscribed;p.subscribed=a(),p.subscribed!==t&&e.$emit("subscription_status_changed",p.subscribed)}function c(){i.redditRequest("get","/r/$sub/about.json",{$sub:p.currentSub},function(t){t.responseError||(p.about=t,e.$emit("subreddits_about_updated"))})}var p={};p.subs=[],p.currentSub="",p.about={},p.subscribed=null;var u=100;return p.updateSubreddits=function(e){t.isAuthenticated?o(e):s(e)},p.updateSubreddits(function(){if(t.isAuthenticated){for(var e=!1,r="t5_3cawe",i=0;i<p.subs.length;i++)p.subs[i].data.name===r&&(e=!0);e||p.subscribe("sub",r,function(){})}}),p.resetSubreddit=function(){p.currentSub="",p.subscribed=null,p.about={}},p.setSubreddit=function(e){e&&p.currentSub!==e&&(p.currentSub=e,l(),c())},p.subscribeCurrent=function(e){var t=p.subscribed?"unsub":"sub";i.redditRequest("post","/api/subscribe",{action:t,sr:p.about.data.name},function(t){t.responseError?e(t,null):p.updateSubreddits(function(t,r){t?e(r,null):e(null,r)})})},p.subscribe=function(e,o,n){t.isAuthenticated?i.redditRequest("post","/api/subscribe",{action:e,sr:o},function(e){e.responseError?n(e,null):p.updateSubreddits(function(e,t){e?n(t,null):n(null,t)})}):r("You've got to log in to subscribed to subreddits")},p.isSubscribed=function(e){return a(e)},p}]),rpUtilServices.factory("rpPostsUtilService",["$rootScope","rpPostsResourceService","rpFrontpageResourceService","rpToastUtilService","rpLocationUtilService","rpRedditApiService",function(e,t,r,i,o,n){return function(e,t,r,s,a,l){e?n.redditRequest("listing","r/$subreddit/$sort",{$subreddit:e,t:s,limit:a,after:r,$sort:t},function(e){if(e.responseError)if(302===e.status){var t=/https:\/\/oauth\.reddit\.com\/r\/([\w]+)*/i,r=t.exec(e.body);r[1]&&o(null,"/r/"+r[1],"",!0,!0)}else i("Something went wrong retrieving posts :/"),o(null,"/error/"+e.status,"",!0,!0),l(e,null);else l(null,e)}):n.redditRequest("listing","/$sort",{$sort:t,after:r,limit:a,t:s},function(e){e.responseError?(i("Something went wrong retrieving posts :/"),o(null,"/error/"+e.status,"",!0,!0),l(e,null)):l(null,e)})}}]),rpUtilServices.factory("rpMessageUtilService",["rpRedditApiService","rpToastUtilService",function(e,t){return function(r,i,o,n){e.redditRequest("listing","/message/$where",{$where:r,after:i,limit:o},function(e){e.responseError?(t("Something went wrong retrieving your messages :/"),n(e,null)):n(null,e)})}}]),rpUtilServices.factory("rpCommentsUtilService",["rpRedditApiService",function(e){return function(t,r,i,o,n,s){e.redditRequest("get","/r/$subreddit/comments/$article",{$subreddit:t,$article:r,comment:o,context:n,showedits:!1,showmore:!0,sort:"confidence"},function(e){e.responseError?s(e,null):s(null,e)})}}]),rpUtilServices.factory("rpMoreChildrenUtilService",["rpRedditApiService",function(e){return function(t,r,i,o){e.redditRequest("get","/api/morechildren",{sort:t,link_id:r,children:i},function(e){e.responseError?o(e,null):o(null,e)})}}]),rpUtilServices.factory("rpUserUtilService",["rpRedditApiService","rpToastUtilService",function(e,t){return function(r,i,o,n,s,a,l){e.redditRequest("listing","/user/$username/$where",{$username:r,$where:i,sort:o,after:n,t:s,limit:a},function(e){e.responseError?(t("Something went wrong retrieving the user's posts :/"),l(e,null)):l(null,e)})}}]),rpUtilServices.factory("rpRedditApiService",["rpByIdResourceService",function(e){return function(t,r){e.redditRequest("get","/by_id/$name",{$name:t},function(e){e.responseError?r(e,null):r(null,e)})}}]),rpUtilServices.factory("rpReadAllMessagesUtilService",["$timeout","rpRedditApiService",function(e,t){return function(r){function i(){o>0&&e(t.redditRequest("post","/api/read_all_messages",{},function(e){e.responseError?(o-=1,i(),r(e,null)):(o=3,r(null,e))}),10*n-o)}var o=9,n=2e3;i()}}]),rpUtilServices.factory("rpReadMessageUtilService",["rpRedditApiService",function(e){return function(t,r){e.redditRequest("post","/api/read_message",{id:t},function(e){e.responseError?r(e,null):r(null,e)})}}]),rpUtilServices.factory("rpToolbarShadowUtilService",["$rootScope",function(e){var t={};return t.showToolbarShadow=!1,t.show=function(){t.showToolbarShadow=!0,e.$broadcast("show_toolbar_shadow_change")},t.hide=function(){t.showToolbarShadow=!1,e.$broadcast("show_toolbar_shadow_change")},t}]);